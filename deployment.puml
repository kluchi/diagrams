@startuml deployment

'left to right direction

'skinparam linetype ortho
'skinparam linetype polyline

skinparam nodesep 40
skinparam ranksep 25

node Server {
    frame "docker-compose" {
        rectangle "root router" as root_r {
            component "nginx" as root {

            }
        }

        rectangle backend {
            component api_server [fastapi 
            application]
        }

        rectangle frontend {
            
            component "nginx" as n2 {

            }

            folder static {

            }
        }

        rectangle "queue" as q {
            queue "rabbitmq" as queue {

            }
        }

        

        rectangle notifications {
            component ns [Notifications
            Service]
        }

        rectangle database {
            database postgres
        }

        rectangle "blob storage" as blob {
            database minio
        }
    }
}



node Android as andoid {
    component Chrome {

    }
}

node IOS as ios {
    component Safari {

    }
}




root --> api_server : /api
root -r-> n2 : /

root -d-> minio : /media


api_server --> postgres
api_server <--> queue

api_server --> minio

ns <--> queue
ns --> postgres

Safari --> root : https

Chrome --> root : https



@enduml