<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="607px" preserveAspectRatio="none" style="width:853px;height:607px;" version="1.1" viewBox="0 0 853 607" width="853px" zoomAndPan="magnify"><defs><filter height="300%" id="feof7oxi1dhct" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[ba9f6df479a4471835432ec83e0d111a]
class RegisterUserUsecase--><rect fill="#FEFECE" filter="url(#feof7oxi1dhct)" height="73.6094" id="RegisterUserUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="167" x="673" y="20.5"/><ellipse cx="688" cy="36.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M690.9688,42.1406 Q690.3906,42.4375 689.75,42.5781 Q689.1094,42.7344 688.4063,42.7344 Q685.9063,42.7344 684.5781,41.0938 Q683.2656,39.4375 683.2656,36.3125 Q683.2656,33.1875 684.5781,31.5313 Q685.9063,29.875 688.4063,29.875 Q689.1094,29.875 689.75,30.0313 Q690.4063,30.1875 690.9688,30.4844 L690.9688,33.2031 Q690.3438,32.625 689.75,32.3594 Q689.1563,32.0781 688.5313,32.0781 Q687.1875,32.0781 686.5,33.1563 Q685.8125,34.2188 685.8125,36.3125 Q685.8125,38.4063 686.5,39.4844 Q687.1875,40.5469 688.5313,40.5469 Q689.1563,40.5469 689.75,40.2813 Q690.3438,40 690.9688,39.4219 L690.9688,42.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="135" x="702" y="40.6543">RegisterUserUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="674" x2="839" y1="52.5" y2="52.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="681" y="60.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="693" y="66.7104">users: UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="674" x2="839" y1="73.3047" y2="73.3047"/><ellipse cx="684" cy="84.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="693" y="87.5151">create_user(data)</text><!--MD5=[093c210125347143eef5bb9199eae634]
class UserRepository--><rect fill="#FEFECE" filter="url(#feof7oxi1dhct)" height="86.4141" id="UserRepository" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="374.5" y="167"/><ellipse cx="413.8" cy="183" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M409.7219,178.7656 L409.7219,176.6094 L417.1125,176.6094 L417.1125,178.7656 L414.6438,178.7656 L414.6438,186.8438 L417.1125,186.8438 L417.1125,189 L409.7219,189 L409.7219,186.8438 L412.1906,186.8438 L412.1906,178.7656 L409.7219,178.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="94" x="433.2" y="187.1543">UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="375.5" x2="553.5" y1="199" y2="199"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="375.5" x2="553.5" y1="207" y2="207"/><ellipse cx="385.5" cy="218" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="394.5" y="221.2104">get(id:UUID): User?</text><ellipse cx="385.5" cy="230.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="394.5" y="234.0151">get_by_email(email): User?</text><ellipse cx="385.5" cy="243.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="394.5" y="246.8198">save(user)</text><!--MD5=[a584bac4041b1810714c0393b312edd2]
class GetUserUsecase--><rect fill="#FEFECE" filter="url(#feof7oxi1dhct)" height="73.6094" id="GetUserUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="254.5" y="20.5"/><ellipse cx="277.15" cy="36.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M280.1188,42.1406 Q279.5406,42.4375 278.9,42.5781 Q278.2594,42.7344 277.5563,42.7344 Q275.0563,42.7344 273.7281,41.0938 Q272.4156,39.4375 272.4156,36.3125 Q272.4156,33.1875 273.7281,31.5313 Q275.0563,29.875 277.5563,29.875 Q278.2594,29.875 278.9,30.0313 Q279.5563,30.1875 280.1188,30.4844 L280.1188,33.2031 Q279.4938,32.625 278.9,32.3594 Q278.3063,32.0781 277.6813,32.0781 Q276.3375,32.0781 275.65,33.1563 Q274.9625,34.2188 274.9625,36.3125 Q274.9625,38.4063 275.65,39.4844 Q276.3375,40.5469 277.6813,40.5469 Q278.3063,40.5469 278.9,40.2813 Q279.4938,40 280.1188,39.4219 L280.1188,42.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="292.85" y="40.6543">GetUserUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="255.5" x2="407.5" y1="52.5" y2="52.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="262.5" y="60.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="274.5" y="66.7104">users: UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="255.5" x2="407.5" y1="73.3047" y2="73.3047"/><ellipse cx="265.5" cy="84.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="274.5" y="87.5151">get_user(user_id)</text><!--MD5=[edf600919611ef5674778c5101389237]
class UpdateProfileUsecase--><rect fill="#FEFECE" filter="url(#feof7oxi1dhct)" height="73.6094" id="UpdateProfileUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="194" x="443.5" y="20.5"/><ellipse cx="468.85" cy="36.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M471.8188,42.1406 Q471.2406,42.4375 470.6,42.5781 Q469.9594,42.7344 469.2563,42.7344 Q466.7563,42.7344 465.4281,41.0938 Q464.1156,39.4375 464.1156,36.3125 Q464.1156,33.1875 465.4281,31.5313 Q466.7563,29.875 469.2563,29.875 Q469.9594,29.875 470.6,30.0313 Q471.2563,30.1875 471.8188,30.4844 L471.8188,33.2031 Q471.1938,32.625 470.6,32.3594 Q470.0063,32.0781 469.3813,32.0781 Q468.0375,32.0781 467.35,33.1563 Q466.6625,34.2188 466.6625,36.3125 Q466.6625,38.4063 467.35,39.4844 Q468.0375,40.5469 469.3813,40.5469 Q470.0063,40.5469 470.6,40.2813 Q471.1938,40 471.8188,39.4219 L471.8188,42.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="139" x="485.15" y="40.6543">UpdateProfileUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="444.5" x2="636.5" y1="52.5" y2="52.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="451.5" y="60.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="463.5" y="66.7104">users: UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="444.5" x2="636.5" y1="73.3047" y2="73.3047"/><ellipse cx="454.5" cy="84.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="168" x="463.5" y="87.5151">update(auth_data, user_data)</text><!--MD5=[c74a6c0741d3f3f6cb875c0c9ba6c06c]
class UpdateAvatarUsecase--><rect fill="#FEFECE" filter="url(#feof7oxi1dhct)" height="99.2188" id="UpdateAvatarUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="213" x="6" y="8"/><ellipse cx="39.45" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M42.4188,29.6406 Q41.8406,29.9375 41.2,30.0781 Q40.5594,30.2344 39.8563,30.2344 Q37.3563,30.2344 36.0281,28.5938 Q34.7156,26.9375 34.7156,23.8125 Q34.7156,20.6875 36.0281,19.0313 Q37.3563,17.375 39.8563,17.375 Q40.5594,17.375 41.2,17.5313 Q41.8563,17.6875 42.4188,17.9844 L42.4188,20.7031 Q41.7938,20.125 41.2,19.8594 Q40.6063,19.5781 39.9813,19.5781 Q38.6375,19.5781 37.95,20.6563 Q37.2625,21.7188 37.2625,23.8125 Q37.2625,25.9063 37.95,26.9844 Q38.6375,28.0469 39.9813,28.0469 Q40.6063,28.0469 41.2,27.7813 Q41.7938,27.5 42.4188,26.9219 L42.4188,29.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="57.55" y="28.1543">UpdateAvatarUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="218" y1="40" y2="40"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="48"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="26" y="54.2104">users: UserRepository</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="60.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="26" y="67.0151">images: MediaRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="218" y1="73.6094" y2="73.6094"/><ellipse cx="17" cy="84.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="26" y="87.8198">upload_avatar(auth_data, image)</text><ellipse cx="17" cy="97.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="141" x="26" y="100.6245">delete_avatar(auth_data)</text><!--MD5=[b50600dfb8dd2e0e1fc2b58f4ebea7a4]
class MediaRepository--><rect fill="#FEFECE" filter="url(#feof7oxi1dhct)" height="60.8047" id="MediaRepository" style="stroke: #A80036; stroke-width: 1.5;" width="183" x="21" y="179.5"/><ellipse cx="57.6" cy="195.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M53.5219,191.2656 L53.5219,189.1094 L60.9125,189.1094 L60.9125,191.2656 L58.4438,191.2656 L58.4438,199.3438 L60.9125,199.3438 L60.9125,201.5 L53.5219,201.5 L53.5219,199.3438 L55.9906,199.3438 L55.9906,191.2656 L53.5219,191.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="103" x="76.4" y="199.6543">MediaRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="22" x2="203" y1="211.5" y2="211.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="22" x2="203" y1="219.5" y2="219.5"/><ellipse cx="32" cy="230.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="157" x="41" y="233.7104">upload_image(image): UUID</text><!--MD5=[3fd616f346a44cd59a91eb10b19e157c]
class User--><rect fill="#FEFECE" filter="url(#feof7oxi1dhct)" height="150.4375" id="User" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="302" y="313"/><ellipse cx="370.75" cy="329" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M373.7188,334.6406 Q373.1406,334.9375 372.5,335.0781 Q371.8594,335.2344 371.1563,335.2344 Q368.6563,335.2344 367.3281,333.5938 Q366.0156,331.9375 366.0156,328.8125 Q366.0156,325.6875 367.3281,324.0313 Q368.6563,322.375 371.1563,322.375 Q371.8594,322.375 372.5,322.5313 Q373.1563,322.6875 373.7188,322.9844 L373.7188,325.7031 Q373.0938,325.125 372.5,324.8594 Q371.9063,324.5781 371.2813,324.5781 Q369.9375,324.5781 369.25,325.6563 Q368.5625,326.7188 368.5625,328.8125 Q368.5625,330.9063 369.25,331.9844 Q369.9375,333.0469 371.2813,333.0469 Q371.9063,333.0469 372.5,332.7813 Q373.0938,332.5 373.7188,331.9219 L373.7188,334.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="29" x="391.25" y="333.1543">User</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="303" x2="476" y1="345" y2="345"/><ellipse cx="313" cy="356" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="322" y="359.2104">id: UUID</text><ellipse cx="313" cy="368.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="322" y="372.0151">email: EmailStr</text><ellipse cx="313" cy="381.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="322" y="384.8198">status: UserStatus</text><ellipse cx="313" cy="394.4141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="322" y="397.6245">password: PasswordHash</text><ellipse cx="313" cy="407.2188" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="322" y="410.4292">first_name: str</text><ellipse cx="313" cy="420.0234" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="322" y="423.2339">last_name: str</text><ellipse cx="313" cy="432.8281" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="41" x="322" y="436.0386">bio: str</text><ellipse cx="313" cy="445.6328" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="322" y="448.8433">photo: Media?</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="303" x2="476" y1="455.4375" y2="455.4375"/><!--MD5=[51fd3fce36c976f35b405d5800336138]
class UserStatus--><rect fill="#FEFECE" filter="url(#feof7oxi1dhct)" height="73.6094" id="UserStatus" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="338.5" y="523"/><ellipse cx="353.5" cy="539" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M357.6094,545 L349.8906,545 L349.8906,532.6094 L357.6094,532.6094 L357.6094,534.7656 L352.3438,534.7656 L352.3438,537.4375 L357.1094,537.4375 L357.1094,539.5938 L352.3438,539.5938 L352.3438,542.8438 L357.6094,542.8438 L357.6094,545 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="367.5" y="543.1543">UserStatus</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="339.5" x2="439.5" y1="555" y2="555"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="344.5" y="569.2104">CREATED</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="344.5" y="582.0151">VERIFIED</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="339.5" x2="439.5" y1="588.6094" y2="588.6094"/><!--MD5=[9d93cc8568a88ed605ddd50c0dd874e2]
class Media--><rect fill="#FEFECE" filter="url(#feof7oxi1dhct)" height="60.8047" id="Media" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="128" y="529.5"/><ellipse cx="143" cy="545.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M145.9688,551.1406 Q145.3906,551.4375 144.75,551.5781 Q144.1094,551.7344 143.4063,551.7344 Q140.9063,551.7344 139.5781,550.0938 Q138.2656,548.4375 138.2656,545.3125 Q138.2656,542.1875 139.5781,540.5313 Q140.9063,538.875 143.4063,538.875 Q144.1094,538.875 144.75,539.0313 Q145.4063,539.1875 145.9688,539.4844 L145.9688,542.2031 Q145.3438,541.625 144.75,541.3594 Q144.1563,541.0781 143.5313,541.0781 Q142.1875,541.0781 141.5,542.1563 Q140.8125,543.2188 140.8125,545.3125 Q140.8125,547.4063 141.5,548.4844 Q142.1875,549.5469 143.5313,549.5469 Q144.1563,549.5469 144.75,549.2813 Q145.3438,549 145.9688,548.4219 L145.9688,551.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="37" x="157" y="549.6543">Media</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="129" x2="196" y1="561.5" y2="561.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="134" y="575.7104">id: UUID</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="129" x2="196" y1="582.3047" y2="582.3047"/><!--MD5=[4e0cb3a35dd1c1245f8d628acd95dc8e]
class PostgresUserRepoImpl--><rect fill="#FEFECE" filter="url(#feof7oxi1dhct)" height="60.8047" id="PostgresUserRepoImpl" style="stroke: #A80036; stroke-width: 1.5;" width="174" x="512.5" y="357.5"/><ellipse cx="527.5" cy="373.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M530.4688,379.1406 Q529.8906,379.4375 529.25,379.5781 Q528.6094,379.7344 527.9063,379.7344 Q525.4063,379.7344 524.0781,378.0938 Q522.7656,376.4375 522.7656,373.3125 Q522.7656,370.1875 524.0781,368.5313 Q525.4063,366.875 527.9063,366.875 Q528.6094,366.875 529.25,367.0313 Q529.9063,367.1875 530.4688,367.4844 L530.4688,370.2031 Q529.8438,369.625 529.25,369.3594 Q528.6563,369.0781 528.0313,369.0781 Q526.6875,369.0781 526,370.1563 Q525.3125,371.2188 525.3125,373.3125 Q525.3125,375.4063 526,376.4844 Q526.6875,377.5469 528.0313,377.5469 Q528.6563,377.5469 529.25,377.2813 Q529.8438,377 530.4688,376.4219 L530.4688,379.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="142" x="541.5" y="377.6543">PostgresUserRepoImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="513.5" x2="685.5" y1="389.5" y2="389.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="520.5" y="397.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="532.5" y="403.7104">db: PostgresConnection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="513.5" x2="685.5" y1="410.3047" y2="410.3047"/><!--MD5=[b3698407ef457bb1644431ba4b390d9f]
class MinioMediaRepoImpl--><rect fill="#FEFECE" filter="url(#feof7oxi1dhct)" height="60.8047" id="MinioMediaRepoImpl" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="108.5" y="357.5"/><ellipse cx="123.5" cy="373.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M126.4688,379.1406 Q125.8906,379.4375 125.25,379.5781 Q124.6094,379.7344 123.9063,379.7344 Q121.4063,379.7344 120.0781,378.0938 Q118.7656,376.4375 118.7656,373.3125 Q118.7656,370.1875 120.0781,368.5313 Q121.4063,366.875 123.9063,366.875 Q124.6094,366.875 125.25,367.0313 Q125.9063,367.1875 126.4688,367.4844 L126.4688,370.2031 Q125.8438,369.625 125.25,369.3594 Q124.6563,369.0781 124.0313,369.0781 Q122.6875,369.0781 122,370.1563 Q121.3125,371.2188 121.3125,373.3125 Q121.3125,375.4063 122,376.4844 Q122.6875,377.5469 124.0313,377.5469 Q124.6563,377.5469 125.25,377.2813 Q125.8438,377 126.4688,376.4219 L126.4688,379.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="126" x="137.5" y="377.6543">MinioMediaRepoImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="109.5" x2="265.5" y1="389.5" y2="389.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="114.5" y="403.7104">credentials: str</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="109.5" x2="265.5" y1="410.3047" y2="410.3047"/><!--MD5=[0d3d67a6ef04163560c9e2439e3d19cf]
class NotificationsService--><rect fill="#FEFECE" filter="url(#feof7oxi1dhct)" height="60.8047" id="NotificationsService" style="stroke: #A80036; stroke-width: 1.5;" width="172" x="670.5" y="179.5"/><ellipse cx="693.6" cy="195.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M689.5219,191.2656 L689.5219,189.1094 L696.9125,189.1094 L696.9125,191.2656 L694.4438,191.2656 L694.4438,199.3438 L696.9125,199.3438 L696.9125,201.5 L689.5219,201.5 L689.5219,199.3438 L691.9906,199.3438 L691.9906,191.2656 L689.5219,191.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="122" x="709.4" y="199.6543">NotificationsService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="671.5" x2="841.5" y1="211.5" y2="211.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="671.5" x2="841.5" y1="219.5" y2="219.5"/><ellipse cx="681.5" cy="230.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="146" x="690.5" y="233.7104">send_verification(user_id)</text><!--MD5=[4b8c278432ef96c74d8b249bf3febe7b]
link RegisterUserUsecase to UserRepository--><path d="M686.56,94.55 C645.78,115.57 594.02,142.25 550.73,164.56 " fill="none" id="RegisterUserUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="546.03,166.98,555.8614,166.3946,550.4703,164.6813,552.1836,159.2902,546.03,166.98" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4f2dab73436ed5fec1bfe8a8667c44c1]
link GetUserUsecase to UserRepository--><path d="M363.36,94.55 C381.52,115.1 404.46,141.06 423.91,163.06 " fill="none" id="GetUserUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="427.24,166.84,424.2883,157.4439,423.9333,163.0896,418.2876,162.7346,427.24,166.84" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[001e43dab09f39a011f2efbd4d80c76d]
link UpdateProfileUsecase to UserRepository--><path d="M522.3,94.55 C512.05,114.85 499.13,140.42 488.11,162.24 " fill="none" id="UpdateProfileUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="485.79,166.84,493.4165,160.6081,488.0432,162.3765,486.2749,157.0031,485.79,166.84" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[494d444a6b75cdd5db5ae73d27579f28]
link UpdateAvatarUsecase to UserRepository--><path d="M219.07,104.06 C267,124.56 323.11,148.55 369.57,168.41 " fill="none" id="UpdateAvatarUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="374.32,170.44,367.6044,163.2358,369.7191,168.4825,364.4724,170.5972,374.32,170.44" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8661c1cc068a72c9331281a705d387f6]
link UpdateAvatarUsecase to MediaRepository--><path d="M112.5,107.36 C112.5,129.11 112.5,154.22 112.5,174.04 " fill="none" id="UpdateAvatarUsecase-&gt;MediaRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="112.5,179.22,116.5,170.22,112.5,174.22,108.5,170.22,112.5,179.22" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[bb813e58dcb6d929d30ff5a4a5d12263]
reverse link User to Media--><path d="M290.93,462.82 C257.43,487.91 222.15,514.33 197.07,533.11 " fill="none" id="User&lt;-Media" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="301.74,454.73,294.54,455.13,292.14,461.93,299.34,461.53,301.74,454.73" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[bf2fdfe05571cb59ff2fe6a1a06cc23c]
reverse link User to UserStatus--><path d="M389.5,476.28 C389.5,492.77 389.5,509.15 389.5,522.93 " fill="none" id="User&lt;-UserStatus" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="389.5,463.07,385.5,469.07,389.5,475.07,393.5,469.07,389.5,463.07" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[70653a2b8f9805ba601a3bf0c9ed9be5]
reverse link UserRepository to User--><path d="M441.34,265.36 C434.94,280.37 427.88,296.92 421.1,312.85 " fill="none" id="UserRepository&lt;-User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="446.54,253.16,440.5084,257.1122,441.8368,264.1999,447.8684,260.2477,446.54,253.16" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[26c5245289d516ed542d2899a122cdd0]
reverse link UserRepository to PostgresUserRepoImpl--><path d="M509.26,269.36 C531.87,298.83 558.32,333.32 576.72,357.3 " fill="none" id="UserRepository&lt;-PostgresUserRepoImpl" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="503.45,273.29,496.84,253.16,514.56,264.77,503.45,273.29" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[85469d579ea478cae1c05ebed7375266]
reverse link MediaRepository to Media--><path d="M98.68,253.39 C84.3,304.47 66.92,392.25 90.5,463 C98.8,487.9 116.37,511.55 132.08,529.14 " fill="none" id="MediaRepository&lt;-Media" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="102.43,240.61,96.8984,245.2362,99.0411,252.1215,104.5728,247.4954,102.43,240.61" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[22586ff5f87c37ec0898f065d9c1de38]
reverse link MediaRepository to MinioMediaRepoImpl--><path d="M133.18,259.54 C146.53,290.86 163.46,330.58 174.84,357.29 " fill="none" id="MediaRepository&lt;-MinioMediaRepoImpl" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="126.62,262,125.22,240.86,139.5,256.51,126.62,262" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b54a3f9d603b3bf6dde7dee46194db01]
link RegisterUserUsecase to NotificationsService--><path d="M756.5,94.55 C756.5,118.64 756.5,150.17 756.5,174.04 " fill="none" id="RegisterUserUsecase-&gt;NotificationsService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="756.5,179.31,760.5,170.31,756.5,174.31,752.5,170.31,756.5,179.31" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ef3fdd452f6ffcb7e6ba9ff6c9d049d6]
@startuml classes

class RegisterUserUsecase {
    - users: UserRepository
    + create_user(data)
}
RegisterUserUsecase - -> UserRepository


class GetUserUsecase {
    - users: UserRepository
    + get_user(user_id)
}
GetUserUsecase - -> UserRepository

class UpdateProfileUsecase {
    - users: UserRepository
    + update(auth_data, user_data)
}
UpdateProfileUsecase - -> UserRepository


class UpdateAvatarUsecase {
    - users: UserRepository
    - images: MediaRepository
    + upload_avatar(auth_data, image)
    + delete_avatar(auth_data)
}
UpdateAvatarUsecase - -> UserRepository
UpdateAvatarUsecase - -> MediaRepository


class User {
    + id: UUID
    + email: EmailStr
    + status: UserStatus
    + password: PasswordHash
    + first_name: str
    + last_name: str
    + bio: str
    + photo: Media?
}

enum UserStatus {
    CREATED
    VERIFIED
}

User *- - Media

User *- - UserStatus

class Media {
    id: UUID
}

interface UserRepository {
    + get(id:UUID): User?
    + get_by_email(email): User?
    + save(user)
}


UserRepository o- - User

class PostgresUserRepoImpl {
    - db: PostgresConnection
}

PostgresUserRepoImpl -u-|> UserRepository

interface MediaRepository {
    + upload_image(image): UUID
}

MediaRepository o- - Media

class MinioMediaRepoImpl {
    credentials: str
}

MinioMediaRepoImpl -u-|> MediaRepository

RegisterUserUsecase - -> NotificationsService

interface NotificationsService {
    + send_verification(user_id)
}


@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.9+11-Ubuntu-0ubuntu1
Operating System: Linux
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>