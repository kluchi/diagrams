<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="436px" preserveAspectRatio="none" style="width:851px;height:436px;" version="1.1" viewBox="0 0 851 436" width="851px" zoomAndPan="magnify"><defs><filter height="300%" id="f1tnx738srh8a" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[ba9f6df479a4471835432ec83e0d111a]
class RegisterUserUsecase--><rect fill="#FEFECE" filter="url(#f1tnx738srh8a)" height="73.6094" id="RegisterUserUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="167" x="6" y="20.5"/><ellipse cx="21" cy="36.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M23.9688,42.1406 Q23.3906,42.4375 22.75,42.5781 Q22.1094,42.7344 21.4063,42.7344 Q18.9063,42.7344 17.5781,41.0938 Q16.2656,39.4375 16.2656,36.3125 Q16.2656,33.1875 17.5781,31.5313 Q18.9063,29.875 21.4063,29.875 Q22.1094,29.875 22.75,30.0313 Q23.4063,30.1875 23.9688,30.4844 L23.9688,33.2031 Q23.3438,32.625 22.75,32.3594 Q22.1563,32.0781 21.5313,32.0781 Q20.1875,32.0781 19.5,33.1563 Q18.8125,34.2188 18.8125,36.3125 Q18.8125,38.4063 19.5,39.4844 Q20.1875,40.5469 21.5313,40.5469 Q22.1563,40.5469 22.75,40.2813 Q23.3438,40 23.9688,39.4219 L23.9688,42.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="135" x="35" y="40.6543">RegisterUserUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="172" y1="52.5" y2="52.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="60.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="26" y="66.7104">users: UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="172" y1="73.3047" y2="73.3047"/><ellipse cx="17" cy="84.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="26" y="87.5151">create_user(data)</text><!--MD5=[093c210125347143eef5bb9199eae634]
class UserRepository--><rect fill="#FEFECE" filter="url(#f1tnx738srh8a)" height="86.4141" id="UserRepository" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="216.5" y="193"/><ellipse cx="255.8" cy="209" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M251.7219,204.7656 L251.7219,202.6094 L259.1125,202.6094 L259.1125,204.7656 L256.6438,204.7656 L256.6438,212.8438 L259.1125,212.8438 L259.1125,215 L251.7219,215 L251.7219,212.8438 L254.1906,212.8438 L254.1906,204.7656 L251.7219,204.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="94" x="275.2" y="213.1543">UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="217.5" x2="395.5" y1="225" y2="225"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="217.5" x2="395.5" y1="233" y2="233"/><ellipse cx="227.5" cy="244" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="236.5" y="247.2104">get(id:UUID): User?</text><ellipse cx="227.5" cy="256.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="236.5" y="260.0151">get_by_email(email): User?</text><ellipse cx="227.5" cy="269.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="236.5" y="272.8198">save(user)</text><!--MD5=[a584bac4041b1810714c0393b312edd2]
class GetUserUsecase--><rect fill="#FEFECE" filter="url(#f1tnx738srh8a)" height="73.6094" id="GetUserUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="208.5" y="20.5"/><ellipse cx="231.15" cy="36.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M234.1188,42.1406 Q233.5406,42.4375 232.9,42.5781 Q232.2594,42.7344 231.5563,42.7344 Q229.0563,42.7344 227.7281,41.0938 Q226.4156,39.4375 226.4156,36.3125 Q226.4156,33.1875 227.7281,31.5313 Q229.0563,29.875 231.5563,29.875 Q232.2594,29.875 232.9,30.0313 Q233.5563,30.1875 234.1188,30.4844 L234.1188,33.2031 Q233.4938,32.625 232.9,32.3594 Q232.3063,32.0781 231.6813,32.0781 Q230.3375,32.0781 229.65,33.1563 Q228.9625,34.2188 228.9625,36.3125 Q228.9625,38.4063 229.65,39.4844 Q230.3375,40.5469 231.6813,40.5469 Q232.3063,40.5469 232.9,40.2813 Q233.4938,40 234.1188,39.4219 L234.1188,42.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="246.85" y="40.6543">GetUserUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="209.5" x2="361.5" y1="52.5" y2="52.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="216.5" y="60.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="228.5" y="66.7104">users: UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="209.5" x2="361.5" y1="73.3047" y2="73.3047"/><ellipse cx="219.5" cy="84.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="228.5" y="87.5151">get_user(user_id)</text><!--MD5=[edf600919611ef5674778c5101389237]
class UpdateProfileUsecase--><rect fill="#FEFECE" filter="url(#f1tnx738srh8a)" height="73.6094" id="UpdateProfileUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="194" x="397.5" y="20.5"/><ellipse cx="422.85" cy="36.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M425.8188,42.1406 Q425.2406,42.4375 424.6,42.5781 Q423.9594,42.7344 423.2563,42.7344 Q420.7563,42.7344 419.4281,41.0938 Q418.1156,39.4375 418.1156,36.3125 Q418.1156,33.1875 419.4281,31.5313 Q420.7563,29.875 423.2563,29.875 Q423.9594,29.875 424.6,30.0313 Q425.2563,30.1875 425.8188,30.4844 L425.8188,33.2031 Q425.1938,32.625 424.6,32.3594 Q424.0063,32.0781 423.3813,32.0781 Q422.0375,32.0781 421.35,33.1563 Q420.6625,34.2188 420.6625,36.3125 Q420.6625,38.4063 421.35,39.4844 Q422.0375,40.5469 423.3813,40.5469 Q424.0063,40.5469 424.6,40.2813 Q425.1938,40 425.8188,39.4219 L425.8188,42.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="139" x="439.15" y="40.6543">UpdateProfileUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="398.5" x2="590.5" y1="52.5" y2="52.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="405.5" y="60.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="417.5" y="66.7104">users: UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="398.5" x2="590.5" y1="73.3047" y2="73.3047"/><ellipse cx="408.5" cy="84.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="168" x="417.5" y="87.5151">update(auth_data, user_data)</text><!--MD5=[c74a6c0741d3f3f6cb875c0c9ba6c06c]
class UpdateAvatarUsecase--><rect fill="#FEFECE" filter="url(#f1tnx738srh8a)" height="99.2188" id="UpdateAvatarUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="213" x="627" y="8"/><ellipse cx="660.45" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M663.4188,29.6406 Q662.8406,29.9375 662.2,30.0781 Q661.5594,30.2344 660.8563,30.2344 Q658.3563,30.2344 657.0281,28.5938 Q655.7156,26.9375 655.7156,23.8125 Q655.7156,20.6875 657.0281,19.0313 Q658.3563,17.375 660.8563,17.375 Q661.5594,17.375 662.2,17.5313 Q662.8563,17.6875 663.4188,17.9844 L663.4188,20.7031 Q662.7938,20.125 662.2,19.8594 Q661.6063,19.5781 660.9813,19.5781 Q659.6375,19.5781 658.95,20.6563 Q658.2625,21.7188 658.2625,23.8125 Q658.2625,25.9063 658.95,26.9844 Q659.6375,28.0469 660.9813,28.0469 Q661.6063,28.0469 662.2,27.7813 Q662.7938,27.5 663.4188,26.9219 L663.4188,29.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="678.55" y="28.1543">UpdateAvatarUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="628" x2="839" y1="40" y2="40"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="635" y="48"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="647" y="54.2104">users: UserRepository</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="635" y="60.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="647" y="67.0151">images: MediaRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="628" x2="839" y1="73.6094" y2="73.6094"/><ellipse cx="638" cy="84.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="647" y="87.8198">upload_avatar(auth_data, image)</text><ellipse cx="638" cy="97.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="141" x="647" y="100.6245">delete_avatar(auth_data)</text><!--MD5=[b50600dfb8dd2e0e1fc2b58f4ebea7a4]
class MediaRepository--><rect fill="#FEFECE" filter="url(#f1tnx738srh8a)" height="60.8047" id="MediaRepository" style="stroke: #A80036; stroke-width: 1.5;" width="183" x="642" y="205.5"/><ellipse cx="678.6" cy="221.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M674.5219,217.2656 L674.5219,215.1094 L681.9125,215.1094 L681.9125,217.2656 L679.4438,217.2656 L679.4438,225.3438 L681.9125,225.3438 L681.9125,227.5 L674.5219,227.5 L674.5219,225.3438 L676.9906,225.3438 L676.9906,217.2656 L674.5219,217.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="103" x="697.4" y="225.6543">MediaRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="643" x2="824" y1="237.5" y2="237.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="643" x2="824" y1="245.5" y2="245.5"/><ellipse cx="653" cy="256.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="157" x="662" y="259.7104">upload_image(image): UUID</text><!--MD5=[3fd616f346a44cd59a91eb10b19e157c]
class User--><rect fill="#FEFECE" filter="url(#f1tnx738srh8a)" height="137.6328" id="User" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="432" y="167"/><ellipse cx="500.75" cy="183" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M503.7188,188.6406 Q503.1406,188.9375 502.5,189.0781 Q501.8594,189.2344 501.1563,189.2344 Q498.6563,189.2344 497.3281,187.5938 Q496.0156,185.9375 496.0156,182.8125 Q496.0156,179.6875 497.3281,178.0313 Q498.6563,176.375 501.1563,176.375 Q501.8594,176.375 502.5,176.5313 Q503.1563,176.6875 503.7188,176.9844 L503.7188,179.7031 Q503.0938,179.125 502.5,178.8594 Q501.9063,178.5781 501.2813,178.5781 Q499.9375,178.5781 499.25,179.6563 Q498.5625,180.7188 498.5625,182.8125 Q498.5625,184.9063 499.25,185.9844 Q499.9375,187.0469 501.2813,187.0469 Q501.9063,187.0469 502.5,186.7813 Q503.0938,186.5 503.7188,185.9219 L503.7188,188.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="29" x="521.25" y="187.1543">User</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="433" x2="606" y1="199" y2="199"/><ellipse cx="443" cy="210" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="452" y="213.2104">id: UUID</text><ellipse cx="443" cy="222.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="452" y="226.0151">email: EmailStr</text><ellipse cx="443" cy="235.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="452" y="238.8198">password: PasswordHash</text><ellipse cx="443" cy="248.4141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="452" y="251.6245">first_name: str</text><ellipse cx="443" cy="261.2188" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="452" y="264.4292">last_name: str</text><ellipse cx="443" cy="274.0234" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="41" x="452" y="277.2339">bio: str</text><ellipse cx="443" cy="286.8281" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="452" y="290.0386">photo: Media?</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="433" x2="606" y1="296.6328" y2="296.6328"/><!--MD5=[9d93cc8568a88ed605ddd50c0dd874e2]
class Media--><rect fill="#FEFECE" filter="url(#f1tnx738srh8a)" height="60.8047" id="Media" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="517" y="365"/><ellipse cx="532" cy="381" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M534.9688,386.6406 Q534.3906,386.9375 533.75,387.0781 Q533.1094,387.2344 532.4063,387.2344 Q529.9063,387.2344 528.5781,385.5938 Q527.2656,383.9375 527.2656,380.8125 Q527.2656,377.6875 528.5781,376.0313 Q529.9063,374.375 532.4063,374.375 Q533.1094,374.375 533.75,374.5313 Q534.4063,374.6875 534.9688,374.9844 L534.9688,377.7031 Q534.3438,377.125 533.75,376.8594 Q533.1563,376.5781 532.5313,376.5781 Q531.1875,376.5781 530.5,377.6563 Q529.8125,378.7188 529.8125,380.8125 Q529.8125,382.9063 530.5,383.9844 Q531.1875,385.0469 532.5313,385.0469 Q533.1563,385.0469 533.75,384.7813 Q534.3438,384.5 534.9688,383.9219 L534.9688,386.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="37" x="546" y="385.1543">Media</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="518" x2="585" y1="397" y2="397"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="523" y="411.2104">id: UUID</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="518" x2="585" y1="417.8047" y2="417.8047"/><!--MD5=[4e0cb3a35dd1c1245f8d628acd95dc8e]
class PostgresUserRepoImpl--><rect fill="#FEFECE" filter="url(#f1tnx738srh8a)" height="60.8047" id="PostgresUserRepoImpl" style="stroke: #A80036; stroke-width: 1.5;" width="174" x="219.5" y="365"/><ellipse cx="234.5" cy="381" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M237.4688,386.6406 Q236.8906,386.9375 236.25,387.0781 Q235.6094,387.2344 234.9063,387.2344 Q232.4063,387.2344 231.0781,385.5938 Q229.7656,383.9375 229.7656,380.8125 Q229.7656,377.6875 231.0781,376.0313 Q232.4063,374.375 234.9063,374.375 Q235.6094,374.375 236.25,374.5313 Q236.9063,374.6875 237.4688,374.9844 L237.4688,377.7031 Q236.8438,377.125 236.25,376.8594 Q235.6563,376.5781 235.0313,376.5781 Q233.6875,376.5781 233,377.6563 Q232.3125,378.7188 232.3125,380.8125 Q232.3125,382.9063 233,383.9844 Q233.6875,385.0469 235.0313,385.0469 Q235.6563,385.0469 236.25,384.7813 Q236.8438,384.5 237.4688,383.9219 L237.4688,386.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="142" x="248.5" y="385.1543">PostgresUserRepoImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="220.5" x2="392.5" y1="397" y2="397"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="227.5" y="405"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="239.5" y="411.2104">db: PostgresConnection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="220.5" x2="392.5" y1="417.8047" y2="417.8047"/><!--MD5=[b3698407ef457bb1644431ba4b390d9f]
class MinioMediaRepoImpl--><rect fill="#FEFECE" filter="url(#f1tnx738srh8a)" height="60.8047" id="MinioMediaRepoImpl" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="654.5" y="365"/><ellipse cx="669.5" cy="381" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M672.4688,386.6406 Q671.8906,386.9375 671.25,387.0781 Q670.6094,387.2344 669.9063,387.2344 Q667.4063,387.2344 666.0781,385.5938 Q664.7656,383.9375 664.7656,380.8125 Q664.7656,377.6875 666.0781,376.0313 Q667.4063,374.375 669.9063,374.375 Q670.6094,374.375 671.25,374.5313 Q671.9063,374.6875 672.4688,374.9844 L672.4688,377.7031 Q671.8438,377.125 671.25,376.8594 Q670.6563,376.5781 670.0313,376.5781 Q668.6875,376.5781 668,377.6563 Q667.3125,378.7188 667.3125,380.8125 Q667.3125,382.9063 668,383.9844 Q668.6875,385.0469 670.0313,385.0469 Q670.6563,385.0469 671.25,384.7813 Q671.8438,384.5 672.4688,383.9219 L672.4688,386.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="126" x="683.5" y="385.1543">MinioMediaRepoImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="655.5" x2="811.5" y1="397" y2="397"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="660.5" y="411.2104">credentials: str</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="655.5" x2="811.5" y1="417.8047" y2="417.8047"/><!--MD5=[4b8c278432ef96c74d8b249bf3febe7b]
link RegisterUserUsecase to UserRepository--><path d="M133.94,94.64 C167.67,122.08 214.29,160 250.56,189.5 " fill="none" id="RegisterUserUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="254.49,192.69,250.0273,183.9102,250.6094,189.537,244.9826,190.1191,254.49,192.69" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4f2dab73436ed5fec1bfe8a8667c44c1]
link GetUserUsecase to UserRepository--><path d="M289.8,94.64 C293,121.53 297.39,158.47 300.87,187.7 " fill="none" id="GetUserUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="301.47,192.69,304.3596,183.2746,300.8692,187.7262,296.4175,184.2359,301.47,192.69" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[001e43dab09f39a011f2efbd4d80c76d]
link UpdateProfileUsecase to UserRepository--><path d="M456,94.64 C426.89,121.97 386.72,159.69 355.34,189.14 " fill="none" id="UpdateProfileUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="351.56,192.69,360.8553,189.4345,355.201,189.2632,355.3723,183.6089,351.56,192.69" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[494d444a6b75cdd5db5ae73d27579f28]
link UpdateAvatarUsecase to UserRepository--><path d="M626.97,100.41 C620.73,102.68 614.55,104.9 608.5,107 C523.27,136.67 496.5,129.3 414.5,167 C400.09,173.63 385.29,181.86 371.45,190.3 " fill="none" id="UpdateAvatarUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="367.19,192.92,376.9525,191.6189,371.4507,190.3035,372.7661,184.8017,367.19,192.92" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8661c1cc068a72c9331281a705d387f6]
link UpdateAvatarUsecase to MediaRepository--><path d="M733.5,107.2 C733.5,136.66 733.5,173.54 733.5,200.1 " fill="none" id="UpdateAvatarUsecase-&gt;MediaRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="733.5,205.27,737.5,196.27,733.5,200.27,729.5,196.27,733.5,205.27" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[bb813e58dcb6d929d30ff5a4a5d12263]
reverse link User to Media--><path d="M535.96,318.01 C539.38,334.83 542.77,351.52 545.51,364.99 " fill="none" id="User&lt;-Media" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="533.35,305.17,530.6231,311.8456,535.7363,316.9303,538.4633,310.2547,533.35,305.17" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[70653a2b8f9805ba601a3bf0c9ed9be5]
reverse link UserRepository to User--><path d="M409.9,236 C417.19,236 424.48,236 431.77,236 " fill="none" id="UserRepository&lt;-User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="396.78,236,402.78,240,408.78,236,402.78,232,396.78,236" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[26c5245289d516ed542d2899a122cdd0]
reverse link UserRepository to PostgresUserRepoImpl--><path d="M306.5,299.5 C306.5,321.96 306.5,346.25 306.5,364.66 " fill="none" id="UserRepository&lt;-PostgresUserRepoImpl" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="299.5,299.21,306.5,279.21,313.5,299.21,299.5,299.21" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[85469d579ea478cae1c05ebed7375266]
reverse link MediaRepository to Media--><path d="M689.34,275.22 C657.52,302.75 615.2,339.37 585.89,364.74 " fill="none" id="MediaRepository&lt;-Media" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="699.27,266.62,692.1152,267.5193,690.1935,274.4696,697.3483,273.5703,699.27,266.62" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[22586ff5f87c37ec0898f065d9c1de38]
reverse link MediaRepository to MinioMediaRepoImpl--><path d="M733.5,286.75 C733.5,312.38 733.5,342.78 733.5,364.74 " fill="none" id="MediaRepository&lt;-MinioMediaRepoImpl" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="726.5,286.62,733.5,266.62,740.5,286.62,726.5,286.62" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ae4ad55a0e6b56019e630c9c7c1277be]
@startuml classes

class RegisterUserUsecase {
    - users: UserRepository
    + create_user(data)
}
RegisterUserUsecase - -> UserRepository


class GetUserUsecase {
    - users: UserRepository
    + get_user(user_id)
}
GetUserUsecase - -> UserRepository

class UpdateProfileUsecase {
    - users: UserRepository
    + update(auth_data, user_data)
}
UpdateProfileUsecase - -> UserRepository


class UpdateAvatarUsecase {
    - users: UserRepository
    - images: MediaRepository
    + upload_avatar(auth_data, image)
    + delete_avatar(auth_data)
}
UpdateAvatarUsecase - -> UserRepository
UpdateAvatarUsecase - -> MediaRepository


class User {
    + id: UUID
    + email: EmailStr
    + password: PasswordHash
    + first_name: str
    + last_name: str
    + bio: str
    + photo: Media?
}

User *- - Media

class Media {
    id: UUID
}

interface UserRepository {
    + get(id:UUID): User?
    + get_by_email(email): User?
    + save(user)
}


UserRepository o-r- User

class PostgresUserRepoImpl {
    - db: PostgresConnection
}

PostgresUserRepoImpl -u-|> UserRepository

interface MediaRepository {
    + upload_image(image): UUID
}

MediaRepository o- - Media

class MinioMediaRepoImpl {
    credentials: str
}

MinioMediaRepoImpl -u-|> MediaRepository


@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.9+11-Ubuntu-0ubuntu1
Operating System: Linux
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>