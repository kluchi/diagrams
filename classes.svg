<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="964px" preserveAspectRatio="none" style="width:2114px;height:964px;" version="1.1" viewBox="0 0 2114 964" width="2114px" zoomAndPan="magnify"><defs><filter height="300%" id="f1c51d5z5gs33t" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[ba9f6df479a4471835432ec83e0d111a]
class RegisterUserUsecase--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="73.6094" id="RegisterUserUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="167" x="656.5" y="205.5"/><ellipse cx="671.5" cy="221.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M674.4688,227.1406 Q673.8906,227.4375 673.25,227.5781 Q672.6094,227.7344 671.9063,227.7344 Q669.4063,227.7344 668.0781,226.0938 Q666.7656,224.4375 666.7656,221.3125 Q666.7656,218.1875 668.0781,216.5313 Q669.4063,214.875 671.9063,214.875 Q672.6094,214.875 673.25,215.0313 Q673.9063,215.1875 674.4688,215.4844 L674.4688,218.2031 Q673.8438,217.625 673.25,217.3594 Q672.6563,217.0781 672.0313,217.0781 Q670.6875,217.0781 670,218.1563 Q669.3125,219.2188 669.3125,221.3125 Q669.3125,223.4063 670,224.4844 Q670.6875,225.5469 672.0313,225.5469 Q672.6563,225.5469 673.25,225.2813 Q673.8438,225 674.4688,224.4219 L674.4688,227.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="135" x="685.5" y="225.6543">RegisterUserUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="657.5" x2="822.5" y1="237.5" y2="237.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="664.5" y="245.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="676.5" y="251.7104">users: UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="657.5" x2="822.5" y1="258.3047" y2="258.3047"/><ellipse cx="667.5" cy="269.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="676.5" y="272.5151">create_user(data)</text><!--MD5=[093c210125347143eef5bb9199eae634]
class UserRepository--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="86.4141" id="UserRepository" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="482" y="365"/><ellipse cx="521.3" cy="381" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M517.2219,376.7656 L517.2219,374.6094 L524.6125,374.6094 L524.6125,376.7656 L522.1438,376.7656 L522.1438,384.8438 L524.6125,384.8438 L524.6125,387 L517.2219,387 L517.2219,384.8438 L519.6906,384.8438 L519.6906,376.7656 L517.2219,376.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="94" x="540.7" y="385.1543">UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="483" x2="661" y1="397" y2="397"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="483" x2="661" y1="405" y2="405"/><ellipse cx="493" cy="416" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="502" y="419.2104">get(id:UUID): User?</text><ellipse cx="493" cy="428.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="502" y="432.0151">get_by_email(email): User?</text><ellipse cx="493" cy="441.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="96" x="502" y="444.8198">save(user): User</text><!--MD5=[a584bac4041b1810714c0393b312edd2]
class GetUserUsecase--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="73.6094" id="GetUserUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="213" y="205.5"/><ellipse cx="257.25" cy="221.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M260.2188,227.1406 Q259.6406,227.4375 259,227.5781 Q258.3594,227.7344 257.6563,227.7344 Q255.1563,227.7344 253.8281,226.0938 Q252.5156,224.4375 252.5156,221.3125 Q252.5156,218.1875 253.8281,216.5313 Q255.1563,214.875 257.6563,214.875 Q258.3594,214.875 259,215.0313 Q259.6563,215.1875 260.2188,215.4844 L260.2188,218.2031 Q259.5938,217.625 259,217.3594 Q258.4063,217.0781 257.7813,217.0781 Q256.4375,217.0781 255.75,218.1563 Q255.0625,219.2188 255.0625,221.3125 Q255.0625,223.4063 255.75,224.4844 Q256.4375,225.5469 257.7813,225.5469 Q258.4063,225.5469 259,225.2813 Q259.5938,225 260.2188,224.4219 L260.2188,227.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="277.75" y="225.6543">GetUserUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="214" x2="414" y1="237.5" y2="237.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="221" y="245.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="233" y="251.7104">users: UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="214" x2="414" y1="258.3047" y2="258.3047"/><ellipse cx="224" cy="269.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="176" x="233" y="272.5151">get_user(user_id: UUID): User?</text><!--MD5=[edf600919611ef5674778c5101389237]
class UpdateProfileUsecase--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="73.6094" id="UpdateProfileUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="450.5" y="205.5"/><ellipse cx="465.5" cy="221.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M468.4688,227.1406 Q467.8906,227.4375 467.25,227.5781 Q466.6094,227.7344 465.9063,227.7344 Q463.4063,227.7344 462.0781,226.0938 Q460.7656,224.4375 460.7656,221.3125 Q460.7656,218.1875 462.0781,216.5313 Q463.4063,214.875 465.9063,214.875 Q466.6094,214.875 467.25,215.0313 Q467.9063,215.1875 468.4688,215.4844 L468.4688,218.2031 Q467.8438,217.625 467.25,217.3594 Q466.6563,217.0781 466.0313,217.0781 Q464.6875,217.0781 464,218.1563 Q463.3125,219.2188 463.3125,221.3125 Q463.3125,223.4063 464,224.4844 Q464.6875,225.5469 466.0313,225.5469 Q466.6563,225.5469 467.25,225.2813 Q467.8438,225 468.4688,224.4219 L468.4688,227.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="139" x="479.5" y="225.6543">UpdateProfileUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="451.5" x2="620.5" y1="237.5" y2="237.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="458.5" y="245.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="470.5" y="251.7104">users: UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="451.5" x2="620.5" y1="258.3047" y2="258.3047"/><ellipse cx="461.5" cy="269.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="470.5" y="272.5151">update(user_data): void</text><!--MD5=[c74a6c0741d3f3f6cb875c0c9ba6c06c]
class UpdateAvatarUsecase--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="99.2188" id="UpdateAvatarUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="172" x="6" y="193"/><ellipse cx="21" cy="209" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M23.9688,214.6406 Q23.3906,214.9375 22.75,215.0781 Q22.1094,215.2344 21.4063,215.2344 Q18.9063,215.2344 17.5781,213.5938 Q16.2656,211.9375 16.2656,208.8125 Q16.2656,205.6875 17.5781,204.0313 Q18.9063,202.375 21.4063,202.375 Q22.1094,202.375 22.75,202.5313 Q23.4063,202.6875 23.9688,202.9844 L23.9688,205.7031 Q23.3438,205.125 22.75,204.8594 Q22.1563,204.5781 21.5313,204.5781 Q20.1875,204.5781 19.5,205.6563 Q18.8125,206.7188 18.8125,208.8125 Q18.8125,210.9063 19.5,211.9844 Q20.1875,213.0469 21.5313,213.0469 Q22.1563,213.0469 22.75,212.7813 Q23.3438,212.5 23.9688,211.9219 L23.9688,214.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="35" y="213.1543">UpdateAvatarUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="177" y1="225" y2="225"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="233"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="26" y="239.2104">users: UserRepository</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="245.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="26" y="252.0151">images: MediaRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="177" y1="258.6094" y2="258.6094"/><ellipse cx="17" cy="269.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="26" y="272.8198">upload_avatar(image)</text><ellipse cx="17" cy="282.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="26" y="285.6245">delete_avatar()</text><!--MD5=[b50600dfb8dd2e0e1fc2b58f4ebea7a4]
class MediaRepository--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="60.8047" id="MediaRepository" style="stroke: #A80036; stroke-width: 1.5;" width="183" x="92.5" y="377.5"/><ellipse cx="129.1" cy="393.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M125.0219,389.2656 L125.0219,387.1094 L132.4125,387.1094 L132.4125,389.2656 L129.9438,389.2656 L129.9438,397.3438 L132.4125,397.3438 L132.4125,399.5 L125.0219,399.5 L125.0219,397.3438 L127.4906,397.3438 L127.4906,389.2656 L125.0219,389.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="103" x="147.9" y="397.6543">MediaRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="93.5" x2="274.5" y1="409.5" y2="409.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="93.5" x2="274.5" y1="417.5" y2="417.5"/><ellipse cx="103.5" cy="428.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="157" x="112.5" y="431.7104">upload_image(image): UUID</text><!--MD5=[3fd616f346a44cd59a91eb10b19e157c]
class User--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="150.4375" id="User" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="1443.5" y="670"/><ellipse cx="1512.25" cy="686" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1515.2188,691.6406 Q1514.6406,691.9375 1514,692.0781 Q1513.3594,692.2344 1512.6563,692.2344 Q1510.1563,692.2344 1508.8281,690.5938 Q1507.5156,688.9375 1507.5156,685.8125 Q1507.5156,682.6875 1508.8281,681.0313 Q1510.1563,679.375 1512.6563,679.375 Q1513.3594,679.375 1514,679.5313 Q1514.6563,679.6875 1515.2188,679.9844 L1515.2188,682.7031 Q1514.5938,682.125 1514,681.8594 Q1513.4063,681.5781 1512.7813,681.5781 Q1511.4375,681.5781 1510.75,682.6563 Q1510.0625,683.7188 1510.0625,685.8125 Q1510.0625,687.9063 1510.75,688.9844 Q1511.4375,690.0469 1512.7813,690.0469 Q1513.4063,690.0469 1514,689.7813 Q1514.5938,689.5 1515.2188,688.9219 L1515.2188,691.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="29" x="1532.75" y="690.1543">User</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1444.5" x2="1617.5" y1="702" y2="702"/><ellipse cx="1454.5" cy="713" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="1463.5" y="716.2104">id: UUID</text><ellipse cx="1454.5" cy="725.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="1463.5" y="729.0151">email: EmailStr</text><ellipse cx="1454.5" cy="738.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="1463.5" y="741.8198">status: UserStatus</text><ellipse cx="1454.5" cy="751.4141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="1463.5" y="754.6245">password: PasswordHash</text><ellipse cx="1454.5" cy="764.2188" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="1463.5" y="767.4292">first_name: str</text><ellipse cx="1454.5" cy="777.0234" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="1463.5" y="780.2339">last_name: str</text><ellipse cx="1454.5" cy="789.8281" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="41" x="1463.5" y="793.0386">bio: str</text><ellipse cx="1454.5" cy="802.6328" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="1463.5" y="805.8433">photo: Media?</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1444.5" x2="1617.5" y1="812.4375" y2="812.4375"/><!--MD5=[51fd3fce36c976f35b405d5800336138]
class UserStatus--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="73.6094" id="UserStatus" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="1480" y="880"/><ellipse cx="1495" cy="896" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1499.1094,902 L1491.3906,902 L1491.3906,889.6094 L1499.1094,889.6094 L1499.1094,891.7656 L1493.8438,891.7656 L1493.8438,894.4375 L1498.6094,894.4375 L1498.6094,896.5938 L1493.8438,896.5938 L1493.8438,899.8438 L1499.1094,899.8438 L1499.1094,902 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="1509" y="900.1543">UserStatus</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1481" x2="1581" y1="912" y2="912"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="1486" y="926.2104">CREATED</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="1486" y="939.0151">VERIFIED</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1481" x2="1581" y1="945.6094" y2="945.6094"/><!--MD5=[9d93cc8568a88ed605ddd50c0dd874e2]
class Media--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="60.8047" id="Media" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="812.5" y="886.5"/><ellipse cx="827.5" cy="902.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M830.4688,908.1406 Q829.8906,908.4375 829.25,908.5781 Q828.6094,908.7344 827.9063,908.7344 Q825.4063,908.7344 824.0781,907.0938 Q822.7656,905.4375 822.7656,902.3125 Q822.7656,899.1875 824.0781,897.5313 Q825.4063,895.875 827.9063,895.875 Q828.6094,895.875 829.25,896.0313 Q829.9063,896.1875 830.4688,896.4844 L830.4688,899.2031 Q829.8438,898.625 829.25,898.3594 Q828.6563,898.0781 828.0313,898.0781 Q826.6875,898.0781 826,899.1563 Q825.3125,900.2188 825.3125,902.3125 Q825.3125,904.4063 826,905.4844 Q826.6875,906.5469 828.0313,906.5469 Q828.6563,906.5469 829.25,906.2813 Q829.8438,906 830.4688,905.4219 L830.4688,908.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="37" x="841.5" y="906.6543">Media</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="813.5" x2="880.5" y1="918.5" y2="918.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="818.5" y="932.7104">id: UUID</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="813.5" x2="880.5" y1="939.3047" y2="939.3047"/><!--MD5=[4e0cb3a35dd1c1245f8d628acd95dc8e]
class PostgresUserRepoImpl--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="60.8047" id="PostgresUserRepoImpl" style="stroke: #A80036; stroke-width: 1.5;" width="174" x="485" y="530"/><ellipse cx="500" cy="546" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M502.9688,551.6406 Q502.3906,551.9375 501.75,552.0781 Q501.1094,552.2344 500.4063,552.2344 Q497.9063,552.2344 496.5781,550.5938 Q495.2656,548.9375 495.2656,545.8125 Q495.2656,542.6875 496.5781,541.0313 Q497.9063,539.375 500.4063,539.375 Q501.1094,539.375 501.75,539.5313 Q502.4063,539.6875 502.9688,539.9844 L502.9688,542.7031 Q502.3438,542.125 501.75,541.8594 Q501.1563,541.5781 500.5313,541.5781 Q499.1875,541.5781 498.5,542.6563 Q497.8125,543.7188 497.8125,545.8125 Q497.8125,547.9063 498.5,548.9844 Q499.1875,550.0469 500.5313,550.0469 Q501.1563,550.0469 501.75,549.7813 Q502.3438,549.5 502.9688,548.9219 L502.9688,551.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="142" x="514" y="550.1543">PostgresUserRepoImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="486" x2="658" y1="562" y2="562"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="493" y="570"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="505" y="576.2104">db: PostgresConnection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="486" x2="658" y1="582.8047" y2="582.8047"/><!--MD5=[b3698407ef457bb1644431ba4b390d9f]
class MinioMediaRepoImpl--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="60.8047" id="MinioMediaRepoImpl" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="237" y="530"/><ellipse cx="252" cy="546" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M254.9688,551.6406 Q254.3906,551.9375 253.75,552.0781 Q253.1094,552.2344 252.4063,552.2344 Q249.9063,552.2344 248.5781,550.5938 Q247.2656,548.9375 247.2656,545.8125 Q247.2656,542.6875 248.5781,541.0313 Q249.9063,539.375 252.4063,539.375 Q253.1094,539.375 253.75,539.5313 Q254.4063,539.6875 254.9688,539.9844 L254.9688,542.7031 Q254.3438,542.125 253.75,541.8594 Q253.1563,541.5781 252.5313,541.5781 Q251.1875,541.5781 250.5,542.6563 Q249.8125,543.7188 249.8125,545.8125 Q249.8125,547.9063 250.5,548.9844 Q251.1875,550.0469 252.5313,550.0469 Q253.1563,550.0469 253.75,549.7813 Q254.3438,549.5 254.9688,548.9219 L254.9688,551.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="126" x="266" y="550.1543">MinioMediaRepoImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="238" x2="394" y1="562" y2="562"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="243" y="576.2104">credentials: str</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="238" x2="394" y1="582.8047" y2="582.8047"/><!--MD5=[0d3d67a6ef04163560c9e2439e3d19cf]
class NotificationsService--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="86.4141" id="NotificationsService" style="stroke: #A80036; stroke-width: 1.5;" width="287" x="733.5" y="365"/><ellipse cx="811.75" cy="381" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M807.6719,376.7656 L807.6719,374.6094 L815.0625,374.6094 L815.0625,376.7656 L812.5938,376.7656 L812.5938,384.8438 L815.0625,384.8438 L815.0625,387 L807.6719,387 L807.6719,384.8438 L810.1406,384.8438 L810.1406,376.7656 L807.6719,376.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="122" x="832.25" y="385.1543">NotificationsService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="734.5" x2="1019.5" y1="397" y2="397"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="734.5" x2="1019.5" y1="405" y2="405"/><ellipse cx="744.5" cy="416" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="165" x="753.5" y="419.2104">send_verification(user: UUID)</text><ellipse cx="744.5" cy="428.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="261" x="753.5" y="432.0151">send_chat_notification(from:UUID, user: UUID)</text><ellipse cx="744.5" cy="441.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="256" x="753.5" y="444.8198">send_friend_request(from: UUID, user: UUID)</text><!--MD5=[3b67181cff55c44d048f4f121abee1a0]
class Friendship--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="99.2188" id="Friendship" style="stroke: #A80036; stroke-width: 1.5;" width="159" x="1281.5" y="511"/><ellipse cx="1324.4" cy="527" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1327.3688,532.6406 Q1326.7906,532.9375 1326.15,533.0781 Q1325.5094,533.2344 1324.8063,533.2344 Q1322.3063,533.2344 1320.9781,531.5938 Q1319.6656,529.9375 1319.6656,526.8125 Q1319.6656,523.6875 1320.9781,522.0313 Q1322.3063,520.375 1324.8063,520.375 Q1325.5094,520.375 1326.15,520.5313 Q1326.8063,520.6875 1327.3688,520.9844 L1327.3688,523.7031 Q1326.7438,523.125 1326.15,522.8594 Q1325.5563,522.5781 1324.9313,522.5781 Q1323.5875,522.5781 1322.9,523.6563 Q1322.2125,524.7188 1322.2125,526.8125 Q1322.2125,528.9063 1322.9,529.9844 Q1323.5875,531.0469 1324.9313,531.0469 Q1325.5563,531.0469 1326.15,530.7813 Q1326.7438,530.5 1327.3688,529.9219 L1327.3688,532.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="65" x="1344.6" y="531.1543">Friendship</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1282.5" x2="1439.5" y1="543" y2="543"/><ellipse cx="1292.5" cy="554" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="1301.5" y="557.2104">user1: User</text><ellipse cx="1292.5" cy="566.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="1301.5" y="570.0151">user2: User</text><ellipse cx="1292.5" cy="579.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="1301.5" y="582.8198">initiator: User</text><ellipse cx="1292.5" cy="592.4141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="1301.5" y="595.6245">status: FriendshipState</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1282.5" x2="1439.5" y1="602.2188" y2="602.2188"/><!--MD5=[e63b9211106c992dfeff555517db0690]
class FriendshipState--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="86.4141" id="FriendshipState" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="1277.5" y="702"/><ellipse cx="1292.5" cy="718" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1296.6094,724 L1288.8906,724 L1288.8906,711.6094 L1296.6094,711.6094 L1296.6094,713.7656 L1291.3438,713.7656 L1291.3438,716.4375 L1296.1094,716.4375 L1296.1094,718.5938 L1291.3438,718.5938 L1291.3438,721.8438 L1296.6094,721.8438 L1296.6094,724 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="99" x="1306.5" y="722.1543">FriendshipState</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1278.5" x2="1407.5" y1="734" y2="734"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="1283.5" y="748.2104">PENDING</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="1283.5" y="761.0151">ACCEPTED</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="54" x="1283.5" y="773.8198">REJECTED</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1278.5" x2="1407.5" y1="780.4141" y2="780.4141"/><!--MD5=[6cdfd470e1bbf55dbabe19064434c1fb]
class FriendshipRepository--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="73.6094" id="FriendshipRepository" style="stroke: #A80036; stroke-width: 1.5;" width="262" x="1105" y="371"/><ellipse cx="1166.75" cy="387" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1162.6719,382.7656 L1162.6719,380.6094 L1170.0625,380.6094 L1170.0625,382.7656 L1167.5938,382.7656 L1167.5938,390.8438 L1170.0625,390.8438 L1170.0625,393 L1162.6719,393 L1162.6719,390.8438 L1165.1406,390.8438 L1165.1406,382.7656 L1162.6719,382.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="130" x="1187.25" y="391.1543">FriendshipRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1106" x2="1366" y1="403" y2="403"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1106" x2="1366" y1="411" y2="411"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="250" x="1111" y="425.2104">find_request(u1:User, u2:User): Friendship?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="1111" y="438.0151">save(link: Friendship)</text><!--MD5=[523dbd4e3789ae37f725fb38854f0b02]
class PostgresFriendshipRepoImpl--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="60.8047" id="PostgresFriendshipRepoImpl" style="stroke: #A80036; stroke-width: 1.5;" width="210" x="1036" y="530"/><ellipse cx="1051" cy="546" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1053.9688,551.6406 Q1053.3906,551.9375 1052.75,552.0781 Q1052.1094,552.2344 1051.4063,552.2344 Q1048.9063,552.2344 1047.5781,550.5938 Q1046.2656,548.9375 1046.2656,545.8125 Q1046.2656,542.6875 1047.5781,541.0313 Q1048.9063,539.375 1051.4063,539.375 Q1052.1094,539.375 1052.75,539.5313 Q1053.4063,539.6875 1053.9688,539.9844 L1053.9688,542.7031 Q1053.3438,542.125 1052.75,541.8594 Q1052.1563,541.5781 1051.5313,541.5781 Q1050.1875,541.5781 1049.5,542.6563 Q1048.8125,543.7188 1048.8125,545.8125 Q1048.8125,547.9063 1049.5,548.9844 Q1050.1875,550.0469 1051.5313,550.0469 Q1052.1563,550.0469 1052.75,549.7813 Q1053.3438,549.5 1053.9688,548.9219 L1053.9688,551.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="178" x="1065" y="550.1543">PostgresFriendshipRepoImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1037" x2="1245" y1="562" y2="562"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1044" y="570"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="1056" y="576.2104">db: PostgresConnection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1037" x2="1245" y1="582.8047" y2="582.8047"/><!--MD5=[0419ab1581269a7645cb09f0695b272b]
class GetFriendsUsecase--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="73.6094" id="GetFriendsUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="206" x="1183" y="205.5"/><ellipse cx="1221.4" cy="221.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1224.3688,227.1406 Q1223.7906,227.4375 1223.15,227.5781 Q1222.5094,227.7344 1221.8063,227.7344 Q1219.3063,227.7344 1217.9781,226.0938 Q1216.6656,224.4375 1216.6656,221.3125 Q1216.6656,218.1875 1217.9781,216.5313 Q1219.3063,214.875 1221.8063,214.875 Q1222.5094,214.875 1223.15,215.0313 Q1223.8063,215.1875 1224.3688,215.4844 L1224.3688,218.2031 Q1223.7438,217.625 1223.15,217.3594 Q1222.5563,217.0781 1221.9313,217.0781 Q1220.5875,217.0781 1219.9,218.1563 Q1219.2125,219.2188 1219.2125,221.3125 Q1219.2125,223.4063 1219.9,224.4844 Q1220.5875,225.5469 1221.9313,225.5469 Q1222.5563,225.5469 1223.15,225.2813 Q1223.7438,225 1224.3688,224.4219 L1224.3688,227.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="122" x="1240.6" y="225.6543">GetFriendsUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1184" x2="1388" y1="237.5" y2="237.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1191" y="245.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="1203" y="251.7104">friends: FriendshipRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1184" x2="1388" y1="258.3047" y2="258.3047"/><ellipse cx="1194" cy="269.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="180" x="1203" y="272.5151">list(friends_of: UUID): List[UUID]</text><!--MD5=[3b636ee9afbb1c3bdd0c4f37f67f4233]
class FriendRequestUsecase--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="124.8281" id="FriendRequestUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="218" x="930" y="180"/><ellipse cx="963.45" cy="196" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M966.4188,201.6406 Q965.8406,201.9375 965.2,202.0781 Q964.5594,202.2344 963.8563,202.2344 Q961.3563,202.2344 960.0281,200.5938 Q958.7156,198.9375 958.7156,195.8125 Q958.7156,192.6875 960.0281,191.0313 Q961.3563,189.375 963.8563,189.375 Q964.5594,189.375 965.2,189.5313 Q965.8563,189.6875 966.4188,189.9844 L966.4188,192.7031 Q965.7938,192.125 965.2,191.8594 Q964.6063,191.5781 963.9813,191.5781 Q962.6375,191.5781 961.95,192.6563 Q961.2625,193.7188 961.2625,195.8125 Q961.2625,197.9063 961.95,198.9844 Q962.6375,200.0469 963.9813,200.0469 Q964.6063,200.0469 965.2,199.7813 Q965.7938,199.5 966.4188,198.9219 L966.4188,201.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="145" x="981.55" y="200.1543">FriendRequestUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="931" x2="1147" y1="212" y2="212"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="938" y="220"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="950" y="226.2104">friends: FriendshipRepository</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="938" y="232.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="950" y="239.0151">users: UserRepository</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="938" y="245.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="950" y="251.8198">notifications: NotificationsService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="931" x2="1147" y1="258.4141" y2="258.4141"/><ellipse cx="941" cy="269.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="192" x="950" y="272.6245">accept(from: UUID, to: UUID): void</text><ellipse cx="941" cy="282.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="183" x="950" y="285.4292">send(from: UUID, to: UUID): void</text><ellipse cx="941" cy="295.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="950" y="298.2339">reject(from: UUID, to: UUID): void</text><!--MD5=[0a8a9a553ad28d76d3a1fd3918a25a86]
class Rating--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="86.4141" id="Rating" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="1494" y="517.5"/><ellipse cx="1509.9" cy="533.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1512.8688,539.1406 Q1512.2906,539.4375 1511.65,539.5781 Q1511.0094,539.7344 1510.3063,539.7344 Q1507.8063,539.7344 1506.4781,538.0938 Q1505.1656,536.4375 1505.1656,533.3125 Q1505.1656,530.1875 1506.4781,528.5313 Q1507.8063,526.875 1510.3063,526.875 Q1511.0094,526.875 1511.65,527.0313 Q1512.3063,527.1875 1512.8688,527.4844 L1512.8688,530.2031 Q1512.2438,529.625 1511.65,529.3594 Q1511.0563,529.0781 1510.4313,529.0781 Q1509.0875,529.0781 1508.4,530.1563 Q1507.7125,531.2188 1507.7125,533.3125 Q1507.7125,535.4063 1508.4,536.4844 Q1509.0875,537.5469 1510.4313,537.5469 Q1511.0563,537.5469 1511.65,537.2813 Q1512.2438,537 1512.8688,536.4219 L1512.8688,539.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="40" x="1524.1" y="537.6543">Rating</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1495" x2="1567" y1="549.5" y2="549.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="1500" y="563.7104">from: User</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="46" x="1500" y="576.5151">to: User</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="1500" y="589.3198">value: int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1495" x2="1567" y1="595.9141" y2="595.9141"/><!--MD5=[baa0b6c6124de993ef56355f49171694]
class RatingRepository--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="86.4141" id="RatingRepository" style="stroke: #A80036; stroke-width: 1.5;" width="217" x="1428.5" y="365"/><ellipse cx="1479.75" cy="381" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1475.6719,376.7656 L1475.6719,374.6094 L1483.0625,374.6094 L1483.0625,376.7656 L1480.5938,376.7656 L1480.5938,384.8438 L1483.0625,384.8438 L1483.0625,387 L1475.6719,387 L1475.6719,384.8438 L1478.1406,384.8438 L1478.1406,376.7656 L1475.6719,376.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="106" x="1500.25" y="385.1543">RatingRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1429.5" x2="1644.5" y1="397" y2="397"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1429.5" x2="1644.5" y1="405" y2="405"/><ellipse cx="1439.5" cy="416" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="191" x="1448.5" y="419.2104">get(from: UUID, to: UUID): Rating?</text><ellipse cx="1439.5" cy="428.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="1448.5" y="432.0151">save(rating): Rating</text><ellipse cx="1439.5" cy="441.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="1448.5" y="444.8198">compute(of: UUID): float?</text><!--MD5=[a8345556ef49c770a74f7526127eac91]
class RatingsUsecase--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="86.4141" id="RatingsUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="280" x="1424" y="199.5"/><ellipse cx="1509.25" cy="215.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1512.2188,221.1406 Q1511.6406,221.4375 1511,221.5781 Q1510.3594,221.7344 1509.6563,221.7344 Q1507.1563,221.7344 1505.8281,220.0938 Q1504.5156,218.4375 1504.5156,215.3125 Q1504.5156,212.1875 1505.8281,210.5313 Q1507.1563,208.875 1509.6563,208.875 Q1510.3594,208.875 1511,209.0313 Q1511.6563,209.1875 1512.2188,209.4844 L1512.2188,212.2031 Q1511.5938,211.625 1511,211.3594 Q1510.4063,211.0781 1509.7813,211.0781 Q1508.4375,211.0781 1507.75,212.1563 Q1507.0625,213.2188 1507.0625,215.3125 Q1507.0625,217.4063 1507.75,218.4844 Q1508.4375,219.5469 1509.7813,219.5469 Q1510.4063,219.5469 1511,219.2813 Q1511.5938,219 1512.2188,218.4219 L1512.2188,221.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="101" x="1529.75" y="219.6543">RatingsUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1425" x2="1703" y1="231.5" y2="231.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1432" y="239.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="1444" y="245.7104">ratings: RatingRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1425" x2="1703" y1="252.3047" y2="252.3047"/><ellipse cx="1435" cy="263.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="254" x="1444" y="266.5151">update(from: UUID, to: UUID, value: int): void</text><ellipse cx="1435" cy="276.1094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="1444" y="279.3198">get_value(user: UUID): float?</text><!--MD5=[bea5b0d46523efab5ea1c1d339f396f0]
class Message--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="86.4141" id="Message" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="1603.5" y="517.5"/><ellipse cx="1630.65" cy="533.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1633.6188,539.1406 Q1633.0406,539.4375 1632.4,539.5781 Q1631.7594,539.7344 1631.0563,539.7344 Q1628.5563,539.7344 1627.2281,538.0938 Q1625.9156,536.4375 1625.9156,533.3125 Q1625.9156,530.1875 1627.2281,528.5313 Q1628.5563,526.875 1631.0563,526.875 Q1631.7594,526.875 1632.4,527.0313 Q1633.0563,527.1875 1633.6188,527.4844 L1633.6188,530.2031 Q1632.9938,529.625 1632.4,529.3594 Q1631.8063,529.0781 1631.1813,529.0781 Q1629.8375,529.0781 1629.15,530.1563 Q1628.4625,531.2188 1628.4625,533.3125 Q1628.4625,535.4063 1629.15,536.4844 Q1629.8375,537.5469 1631.1813,537.5469 Q1631.8063,537.5469 1632.4,537.2813 Q1632.9938,537 1633.6188,536.4219 L1633.6188,539.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="1647.35" y="537.6543">Message</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1604.5" x2="1717.5" y1="549.5" y2="549.5"/><ellipse cx="1614.5" cy="560.5" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="75" x="1623.5" y="563.7104">sender: User</text><ellipse cx="1614.5" cy="573.3047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="1623.5" y="576.5151">text: str</text><ellipse cx="1614.5" cy="586.1094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="1623.5" y="589.3198">order: datetime</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1604.5" x2="1717.5" y1="595.9141" y2="595.9141"/><!--MD5=[50d4997affe4b7e1b12b08ba12feba96]
class Chat--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="86.4141" id="Chat" style="stroke: #A80036; stroke-width: 1.5;" width="173" x="1685.5" y="365"/><ellipse cx="1753.25" cy="381" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1756.2188,386.6406 Q1755.6406,386.9375 1755,387.0781 Q1754.3594,387.2344 1753.6563,387.2344 Q1751.1563,387.2344 1749.8281,385.5938 Q1748.5156,383.9375 1748.5156,380.8125 Q1748.5156,377.6875 1749.8281,376.0313 Q1751.1563,374.375 1753.6563,374.375 Q1754.3594,374.375 1755,374.5313 Q1755.6563,374.6875 1756.2188,374.9844 L1756.2188,377.7031 Q1755.5938,377.125 1755,376.8594 Q1754.4063,376.5781 1753.7813,376.5781 Q1752.4375,376.5781 1751.75,377.6563 Q1751.0625,378.7188 1751.0625,380.8125 Q1751.0625,382.9063 1751.75,383.9844 Q1752.4375,385.0469 1753.7813,385.0469 Q1754.4063,385.0469 1755,384.7813 Q1755.5938,384.5 1756.2188,383.9219 L1756.2188,386.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="29" x="1773.75" y="385.1543">Chat</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1686.5" x2="1857.5" y1="397" y2="397"/><ellipse cx="1696.5" cy="408" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="1705.5" y="411.2104">u1: User</text><ellipse cx="1696.5" cy="420.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="1705.5" y="424.0151">u2: User</text><ellipse cx="1696.5" cy="433.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="1705.5" y="436.8198">messages: List[Message]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1686.5" x2="1857.5" y1="443.4141" y2="443.4141"/><path d="M1893.5,395.5 L1893.5,404 L1858.86,408 L1893.5,412 L1893.5,420.6328 A0,0 0 0 0 1893.5,420.6328 L2058.5,420.6328 A0,0 0 0 0 2058.5,420.6328 L2058.5,405.5 L2048.5,395.5 L1893.5,395.5 A0,0 0 0 0 1893.5,395.5 " fill="#FBFB77" filter="url(#f1c51d5z5gs33t)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2048.5,395.5 L2048.5,405.5 L2058.5,405.5 L2048.5,395.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="1899.5" y="412.5669">invariant: u1.id &lt; u2.id</text><!--MD5=[ab71ee5346321a0c39dada4dce0eee4e]
class ChatRepository--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="86.4141" id="ChatRepository" style="stroke: #A80036; stroke-width: 1.5;" width="364" x="1739" y="199.5"/><ellipse cx="1869.25" cy="215.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1865.1719,211.2656 L1865.1719,209.1094 L1872.5625,209.1094 L1872.5625,211.2656 L1870.0938,211.2656 L1870.0938,219.3438 L1872.5625,219.3438 L1872.5625,221.5 L1865.1719,221.5 L1865.1719,219.3438 L1867.6406,219.3438 L1867.6406,211.2656 L1865.1719,211.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="95" x="1889.75" y="219.6543">ChatRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1740" x2="2102" y1="231.5" y2="231.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1740" x2="2102" y1="239.5" y2="239.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="185" x="1745" y="253.7104">list_chats(user: UUID): List[Chat]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="348" x="1745" y="266.5151">get_messages(u1: UUID, u2: UUID, offset: int): List[Message]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="352" x="1745" y="279.3198">create_message(from: UUID, to: UUID, content: str): Message</text><!--MD5=[0aa9b71e4e80e7c418f11eab1a1a5bef]
class ChatUsecase--><rect fill="#FEFECE" filter="url(#f1c51d5z5gs33t)" height="112.0234" id="ChatUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="384" x="1207" y="8"/><ellipse cx="1353.25" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1356.2188,29.6406 Q1355.6406,29.9375 1355,30.0781 Q1354.3594,30.2344 1353.6563,30.2344 Q1351.1563,30.2344 1349.8281,28.5938 Q1348.5156,26.9375 1348.5156,23.8125 Q1348.5156,20.6875 1349.8281,19.0313 Q1351.1563,17.375 1353.6563,17.375 Q1354.3594,17.375 1355,17.5313 Q1355.6563,17.6875 1356.2188,17.9844 L1356.2188,20.7031 Q1355.5938,20.125 1355,19.8594 Q1354.4063,19.5781 1353.7813,19.5781 Q1352.4375,19.5781 1351.75,20.6563 Q1351.0625,21.7188 1351.0625,23.8125 Q1351.0625,25.9063 1351.75,26.9844 Q1352.4375,28.0469 1353.7813,28.0469 Q1354.4063,28.0469 1355,27.7813 Q1355.5938,27.5 1356.2188,26.9219 L1356.2188,29.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="83" x="1373.75" y="28.1543">ChatUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1208" x2="1590" y1="40" y2="40"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1215" y="48"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="1227" y="54.2104">notifications: NotificationsService</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1215" y="60.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="1227" y="67.0151">chats: ChatRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1208" x2="1590" y1="73.6094" y2="73.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="186" x="1213" y="87.8198">get_chats(user: UUID): List[Chat]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="348" x="1213" y="100.6245">get_messages(u1: UUID, u2: UUID, offset: int): List[Message]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="372" x="1213" y="113.4292">send_message(from: UUID, to: UUID, content: str): List[Message]</text><!--MD5=[4b8c278432ef96c74d8b249bf3febe7b]
link RegisterUserUsecase to UserRepository--><path d="M702.72,279.79 C678.11,303.73 645.68,335.3 619.27,361 " fill="none" id="RegisterUserUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="615.42,364.75,624.6615,361.3448,619.0052,361.2648,619.0852,355.6085,615.42,364.75" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4f2dab73436ed5fec1bfe8a8667c44c1]
link GetUserUsecase to UserRepository--><path d="M370.94,279.58 C409.31,303.9 460.21,336.15 501.19,362.13 " fill="none" id="GetUserUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="505.63,364.94,500.1576,356.7514,501.4029,362.2695,495.8848,363.5148,505.63,364.94" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[001e43dab09f39a011f2efbd4d80c76d]
link UpdateProfileUsecase to UserRepository--><path d="M543.99,279.79 C549.17,303.34 555.98,334.26 561.59,359.73 " fill="none" id="UpdateProfileUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="562.7,364.75,564.6793,355.1021,561.629,359.8661,556.865,356.8157,562.7,364.75" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[494d444a6b75cdd5db5ae73d27579f28]
link UpdateAvatarUsecase to UserRepository--><path d="M168.13,292.05 C177.01,296.78 186.08,301.22 195,305 C287.38,344.19 398.95,372.16 476.65,388.78 " fill="none" id="UpdateAvatarUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="481.71,389.86,473.7433,384.0694,476.8202,388.8163,472.0733,391.8931,481.71,389.86" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8661c1cc068a72c9331281a705d387f6]
link UpdateAvatarUsecase to MediaRepository--><path d="M119.35,292.11 C133.95,318.06 151.57,349.36 164.72,372.74 " fill="none" id="UpdateAvatarUsecase-&gt;MediaRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="167.29,377.3,166.3777,367.4935,164.8448,372.9387,159.3996,371.4058,167.29,377.3" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[bb813e58dcb6d929d30ff5a4a5d12263]
reverse link User to Media--><path d="M1431.41,817.67 C1429.61,818.48 1427.81,819.26 1426,820 C1231.32,899.82 973.98,913.33 881.74,915.57 " fill="none" id="User&lt;-Media" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1443.24,811.9,1436.0928,810.9424,1432.4598,817.1715,1439.6071,818.1291,1443.24,811.9" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[bf2fdfe05571cb59ff2fe6a1a06cc23c]
reverse link User to UserStatus--><path d="M1531,833.28 C1531,849.77 1531,866.15 1531,879.93 " fill="none" id="User&lt;-UserStatus" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1531,820.07,1527,826.07,1531,832.07,1535,826.07,1531,820.07" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[70653a2b8f9805ba601a3bf0c9ed9be5]
reverse link UserRepository to User--><path d="M659.57,457.27 C747.55,503.63 888.31,572.04 1018,610 C1193.91,661.48 1255.79,602.02 1426,670 C1431.8,672.32 1437.59,675.01 1443.29,677.97 " fill="none" id="UserRepository&lt;-User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="648.05,451.17,651.4823,457.5119,658.6564,456.7828,655.2242,450.4409,648.05,451.17" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[26c5245289d516ed542d2899a122cdd0]
reverse link UserRepository to PostgresUserRepoImpl--><path d="M572,471.33 C572,491.59 572,513.15 572,529.88 " fill="none" id="UserRepository&lt;-PostgresUserRepoImpl" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="565,471.32,572,451.32,579,471.32,565,471.32" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[85469d579ea478cae1c05ebed7375266]
reverse link MediaRepository to Media--><path d="M180.75,451.59 C179.63,495.56 184.44,564.05 219,610 C373.92,815.96 704.36,890.84 812.18,910.34 " fill="none" id="MediaRepository&lt;-Media" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="181.27,438.51,177.0359,444.3472,180.7956,450.5006,185.0297,444.6634,181.27,438.51" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[22586ff5f87c37ec0898f065d9c1de38]
reverse link MediaRepository to MinioMediaRepoImpl--><path d="M223.45,453.98 C244.97,478.51 271.01,508.2 289.98,529.83 " fill="none" id="MediaRepository&lt;-MinioMediaRepoImpl" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="218,458.39,210.08,438.73,228.53,449.15,218,458.39" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b54a3f9d603b3bf6dde7dee46194db01]
link RegisterUserUsecase to NotificationsService--><path d="M770.4,279.79 C790.38,303.63 816.7,335.04 838.19,360.68 " fill="none" id="RegisterUserUsecase-&gt;NotificationsService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="841.59,364.75,838.8666,355.2852,838.375,360.9206,832.7396,360.4291,841.59,364.75" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[0b93ce3a17968920a9643cf885986b25]
reverse link Friendship to FriendshipState--><path d="M1354.88,623.52 C1352.34,649.3 1349.45,678.56 1347.16,701.78 " fill="none" id="Friendship&lt;-FriendshipState" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1356.18,610.41,1351.6126,615.9902,1355.0068,622.3525,1359.5743,616.7723,1356.18,610.41" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[6e59cc6eb94ffb2325a27bfd6ddcd767]
reverse link Friendship to User--><path d="M1415.55,620.06 C1430.32,635.92 1446.5,653.29 1461.96,669.88 " fill="none" id="Friendship&lt;-User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1406.56,610.41,1407.7205,617.5271,1414.7365,619.1932,1413.576,612.0761,1406.56,610.41" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1446.9984" y="659.0577">3</text><!--MD5=[9278a4db87134efe22e65567c6d1c4ad]
reverse link FriendshipRepository to Friendship--><path d="M1274.31,455.13 C1289,472.82 1305.8,493.04 1320.67,510.94 " fill="none" id="FriendshipRepository&lt;-Friendship" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1265.94,445.05,1266.7002,452.2209,1273.6118,454.2773,1272.8517,447.1064,1265.94,445.05" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[59d3a531ac47398acd15a22f8ef4d1ed]
reverse link FriendshipRepository to PostgresFriendshipRepoImpl--><path d="M1202.49,462.08 C1188.14,484.82 1171.92,510.52 1159.74,529.81 " fill="none" id="FriendshipRepository&lt;-PostgresFriendshipRepoImpl" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1196.65,458.22,1213.25,445.05,1208.49,465.7,1196.65,458.22" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[3406471606f8843b6e9c1a52300f4c39]
link GetFriendsUsecase to FriendshipRepository--><path d="M1274.9,279.79 C1267.1,305.29 1256.65,339.46 1248.55,365.96 " fill="none" id="GetFriendsUsecase-&gt;FriendshipRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1247.07,370.82,1253.5383,363.393,1248.5394,366.0408,1245.8916,361.0419,1247.07,370.82" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[914926d311a2ca9550e2a6621a7d93db]
link FriendRequestUsecase to NotificationsService--><path d="M977.75,305.31 C959.43,323.81 939.67,343.75 922.54,361.04 " fill="none" id="FriendRequestUsecase-&gt;NotificationsService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="918.7,364.91,927.878,361.3373,922.2212,361.3602,922.1983,355.7034,918.7,364.91" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[69fc47a81207c237ec188d724843a255]
link FriendRequestUsecase to FriendshipRepository--><path d="M1113.2,305.08 C1138.46,326.04 1165.99,348.9 1188.58,367.64 " fill="none" id="FriendRequestUsecase-&gt;FriendshipRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1192.44,370.85,1188.0641,362.0267,1188.5907,367.6589,1182.9584,368.1855,1192.44,370.85" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[2cf7c2302ec48e39cf53c4e9dd09deba]
link FriendRequestUsecase to UserRepository--><path d="M929.8,281.73 C850.15,309.62 743.25,347.05 667.09,373.71 " fill="none" id="FriendRequestUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="662.12,375.45,671.935,376.2655,666.8415,373.8046,669.3024,368.7111,662.12,375.45" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[7df1310d9f5b50d284c38b4b9283908e]
link Rating to User--><path d="M1531,603.83 C1531,621.96 1531,643.75 1531,664.69 " fill="none" id="Rating-&gt;User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1531,669.7,1535,660.7,1531,664.7,1527,660.7,1531,669.7" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1522.6188" y="658.8605">2</text><!--MD5=[be7a7871b40b052ef0f195f85c6ac0dc]
reverse link RatingRepository to Rating--><path d="M1534.79,464.37 C1534.09,481.93 1533.33,501.04 1532.67,517.49 " fill="none" id="RatingRepository&lt;-Rating" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1535.31,451.32,1531.0757,457.157,1534.8351,463.3106,1539.0694,457.4736,1535.31,451.32" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[67c2091cc910f71dec9d812cfa60579c]
link RatingsUsecase to RatingRepository--><path d="M1557.05,285.61 C1553.31,308.21 1548.7,336.16 1544.84,359.53 " fill="none" id="RatingsUsecase-&gt;RatingRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1543.98,364.75,1549.3897,356.5199,1544.7927,359.8165,1541.4961,355.2195,1543.98,364.75" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[291b61393bea30c3ece0603e5ad87f6e]
link Chat to User--><path d="M1773.82,451.03 C1773.69,494.34 1767.69,562.1 1736,610 C1708.72,651.23 1663.94,682.65 1623.18,704.66 " fill="none" id="Chat-&gt;User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1618.74,707.03,1628.5632,706.3192,1623.1506,704.6748,1624.7949,699.2622,1618.74,707.03" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1626.6239" y="700.1762">2</text><!--MD5=[0e57511ddfa407e901127168a4cd2134]
reverse link Chat to Message--><path d="M1733.05,461.8 C1719.6,480.05 1704.71,500.23 1691.98,517.49 " fill="none" id="Chat&lt;-Message" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1740.78,451.32,1733.997,453.7678,1733.6477,460.9704,1740.4306,458.5226,1740.78,451.32" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[249b8abd4e729a16b977da04c600c214]
link Message to User--><path d="M1630.85,603.83 C1617.77,622.19 1602.02,644.3 1586.93,665.48 " fill="none" id="Message-&gt;User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1583.92,669.7,1592.3994,664.6901,1586.8208,665.6275,1585.8834,660.0488,1583.92,669.7" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[051f5d6458d24b0910ba2e55fa7d036e]
reverse link ChatRepository to Chat--><path d="M1873.8,295.29 C1853.4,317.68 1829.82,343.55 1810.5,364.75 " fill="none" id="ChatRepository&lt;-Chat" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1882.63,285.61,1875.6325,287.3522,1874.5494,294.4815,1881.5469,292.7393,1882.63,285.61" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[d6d223b4c24de32bf7e0fbd1fc0963a2]
link ChatUsecase to ChatRepository--><path d="M1562.02,120.12 C1635.93,145.11 1722.1,174.25 1791.49,197.71 " fill="none" id="ChatUsecase-&gt;ChatRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1796.45,199.39,1789.2069,192.7164,1791.7138,197.7874,1786.6427,200.2943,1796.45,199.39" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ada288d3b84e29bca0b3af1461cda329]
link ChatUsecase to NotificationsService--><path d="M1207,88.16 C1088.77,106.49 952.35,136.33 912,180 C867.39,228.28 865.72,308.5 870.18,359.51 " fill="none" id="ChatUsecase-&gt;NotificationsService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="870.66,364.66,873.8191,355.3315,870.2022,359.681,865.8527,356.0641,870.66,364.66" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b4d1eb41cb53c12d26b5d37fc703f172]
@startuml classes

class RegisterUserUsecase {
    - users: UserRepository
    + create_user(data)
}
RegisterUserUsecase - -> UserRepository


class GetUserUsecase {
    - users: UserRepository
    + get_user(user_id: UUID): User?
}
GetUserUsecase - -> UserRepository

class UpdateProfileUsecase {
    - users: UserRepository
    + update(user_data): void
}
UpdateProfileUsecase - -> UserRepository


class UpdateAvatarUsecase {
    - users: UserRepository
    - images: MediaRepository
    + upload_avatar(image)
    + delete_avatar()
}
UpdateAvatarUsecase - -> UserRepository
UpdateAvatarUsecase - -> MediaRepository


class User {
    + id: UUID
    + email: EmailStr
    + status: UserStatus
    + password: PasswordHash
    + first_name: str
    + last_name: str
    + bio: str
    + photo: Media?
}

enum UserStatus {
    CREATED
    VERIFIED
}

User *- - Media

User *- - UserStatus

class Media {
    id: UUID
}

interface UserRepository {
    + get(id:UUID): User?
    + get_by_email(email): User?
    + save(user): User
}


UserRepository o- - User

class PostgresUserRepoImpl {
    - db: PostgresConnection
}

PostgresUserRepoImpl -u-|> UserRepository

interface MediaRepository {
    + upload_image(image): UUID
}

MediaRepository o- - Media

class MinioMediaRepoImpl {
    credentials: str
}

MinioMediaRepoImpl -u-|> MediaRepository

RegisterUserUsecase - -> NotificationsService

interface NotificationsService {
    + send_verification(user: UUID)
    + send_chat_notification(from:UUID, user: UUID)
    + send_friend_request(from: UUID, user: UUID)
}

class Friendship {
    + user1: User
    + user2: User
    + initiator: User
    + status: FriendshipState
}



enum FriendshipState {
    PENDING
    ACCEPTED
    REJECTED
}

Friendship *- - FriendshipState

Friendship o- - "3" User

interface FriendshipRepository {
    find_request(u1:User, u2:User): Friendship?
    save(link: Friendship)
}

FriendshipRepository o- - Friendship

class PostgresFriendshipRepoImpl {
    - db: PostgresConnection
}

PostgresFriendshipRepoImpl -up-|> FriendshipRepository

class GetFriendsUsecase {
    - friends: FriendshipRepository

    + list(friends_of: UUID): List[UUID]
}

GetFriendsUsecase - -> FriendshipRepository

class FriendRequestUsecase {
    - friends: FriendshipRepository
    - users: UserRepository
    - notifications: NotificationsService

    + accept(from: UUID, to: UUID): void
    + send(from: UUID, to: UUID): void
    + reject(from: UUID, to: UUID): void
}


FriendRequestUsecase - -> NotificationsService
FriendRequestUsecase - -> FriendshipRepository
FriendRequestUsecase - -> UserRepository

class Rating {
    from: User
    to: User
    value: int
}

Rating - -> "2" User

interface RatingRepository {
    + get(from: UUID, to: UUID): Rating?
    + save(rating): Rating
    + compute(of: UUID): float?
}

RatingRepository o- - Rating

class RatingsUsecase {
    - ratings: RatingRepository

    + update(from: UUID, to: UUID, value: int): void
    + get_value(user: UUID): float?
}

RatingsUsecase - -> RatingRepository

class Message {
    + sender: User
    + text: str
    + order: datetime
}

class Chat {
    + u1: User
    + u2: User
    + messages: List[Message]
}

note right of Chat: invariant: u1.id < u2.id

Chat - -> "2" User

Chat o- - Message
Message - -> User

interface ChatRepository {
    list_chats(user: UUID): List[Chat]
    get_messages(u1: UUID, u2: UUID, offset: int): List[Message]
    create_message(from: UUID, to: UUID, content: str): Message
}

ChatRepository o- - Chat

class ChatUsecase {
    - notifications: NotificationsService
    - chats: ChatRepository

    get_chats(user: UUID): List[Chat]
    get_messages(u1: UUID, u2: UUID, offset: int): List[Message]
    send_message(from: UUID, to: UUID, content: str): List[Message]
}

ChatUsecase - -> ChatRepository
ChatUsecase - -> NotificationsService

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.9+11-Ubuntu-0ubuntu1
Operating System: Linux
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>