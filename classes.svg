<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="964px" preserveAspectRatio="none" style="width:2247px;height:964px;" version="1.1" viewBox="0 0 2247 964" width="2247px" zoomAndPan="magnify"><defs><filter height="300%" id="fd8kddooxek6d" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[ba9f6df479a4471835432ec83e0d111a]
class RegisterUserUsecase--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="73.6094" id="RegisterUserUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="229" x="727.5" y="205.5"/><ellipse cx="770.4" cy="221.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M773.3688,227.1406 Q772.7906,227.4375 772.15,227.5781 Q771.5094,227.7344 770.8063,227.7344 Q768.3063,227.7344 766.9781,226.0938 Q765.6656,224.4375 765.6656,221.3125 Q765.6656,218.1875 766.9781,216.5313 Q768.3063,214.875 770.8063,214.875 Q771.5094,214.875 772.15,215.0313 Q772.8063,215.1875 773.3688,215.4844 L773.3688,218.2031 Q772.7438,217.625 772.15,217.3594 Q771.5563,217.0781 770.9313,217.0781 Q769.5875,217.0781 768.9,218.1563 Q768.2125,219.2188 768.2125,221.3125 Q768.2125,223.4063 768.9,224.4844 Q769.5875,225.5469 770.9313,225.5469 Q771.5563,225.5469 772.15,225.2813 Q772.7438,225 773.3688,224.4219 L773.3688,227.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="135" x="790.6" y="225.6543">RegisterUserUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="728.5" x2="955.5" y1="237.5" y2="237.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="735.5" y="245.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="747.5" y="251.7104">users: UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="728.5" x2="955.5" y1="258.3047" y2="258.3047"/><ellipse cx="738.5" cy="269.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="203" x="747.5" y="272.5151">create_user(data: UserData): User?</text><!--MD5=[093c210125347143eef5bb9199eae634]
class UserRepository--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="86.4141" id="UserRepository" style="stroke: #A80036; stroke-width: 1.5;" width="204" x="562" y="365"/><ellipse cx="612.75" cy="381" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M608.6719,376.7656 L608.6719,374.6094 L616.0625,374.6094 L616.0625,376.7656 L613.5938,376.7656 L613.5938,384.8438 L616.0625,384.8438 L616.0625,387 L608.6719,387 L608.6719,384.8438 L611.1406,384.8438 L611.1406,376.7656 L608.6719,376.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="94" x="633.25" y="385.1543">UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="563" x2="765" y1="397" y2="397"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="563" x2="765" y1="405" y2="405"/><ellipse cx="573" cy="416" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="582" y="419.2104">get(id:UUID): User?</text><ellipse cx="573" cy="428.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="582" y="432.0151">get_by_email(email: str): User?</text><ellipse cx="573" cy="441.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="131" x="582" y="444.8198">save(user: User): User</text><!--MD5=[a584bac4041b1810714c0393b312edd2]
class GetUserUsecase--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="73.6094" id="GetUserUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="269" y="205.5"/><ellipse cx="313.25" cy="221.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M316.2188,227.1406 Q315.6406,227.4375 315,227.5781 Q314.3594,227.7344 313.6563,227.7344 Q311.1563,227.7344 309.8281,226.0938 Q308.5156,224.4375 308.5156,221.3125 Q308.5156,218.1875 309.8281,216.5313 Q311.1563,214.875 313.6563,214.875 Q314.3594,214.875 315,215.0313 Q315.6563,215.1875 316.2188,215.4844 L316.2188,218.2031 Q315.5938,217.625 315,217.3594 Q314.4063,217.0781 313.7813,217.0781 Q312.4375,217.0781 311.75,218.1563 Q311.0625,219.2188 311.0625,221.3125 Q311.0625,223.4063 311.75,224.4844 Q312.4375,225.5469 313.7813,225.5469 Q314.4063,225.5469 315,225.2813 Q315.5938,225 316.2188,224.4219 L316.2188,227.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="333.75" y="225.6543">GetUserUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="270" x2="470" y1="237.5" y2="237.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="277" y="245.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="289" y="251.7104">users: UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="270" x2="470" y1="258.3047" y2="258.3047"/><ellipse cx="280" cy="269.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="176" x="289" y="272.5151">get_user(user_id: UUID): User?</text><!--MD5=[edf600919611ef5674778c5101389237]
class UpdateProfileUsecase--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="73.6094" id="UpdateProfileUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="186" x="506" y="205.5"/><ellipse cx="527.75" cy="221.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M530.7188,227.1406 Q530.1406,227.4375 529.5,227.5781 Q528.8594,227.7344 528.1563,227.7344 Q525.6563,227.7344 524.3281,226.0938 Q523.0156,224.4375 523.0156,221.3125 Q523.0156,218.1875 524.3281,216.5313 Q525.6563,214.875 528.1563,214.875 Q528.8594,214.875 529.5,215.0313 Q530.1563,215.1875 530.7188,215.4844 L530.7188,218.2031 Q530.0938,217.625 529.5,217.3594 Q528.9063,217.0781 528.2813,217.0781 Q526.9375,217.0781 526.25,218.1563 Q525.5625,219.2188 525.5625,221.3125 Q525.5625,223.4063 526.25,224.4844 Q526.9375,225.5469 528.2813,225.5469 Q528.9063,225.5469 529.5,225.2813 Q530.0938,225 530.7188,224.4219 L530.7188,227.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="139" x="543.25" y="225.6543">UpdateProfileUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="507" x2="691" y1="237.5" y2="237.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="514" y="245.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="526" y="251.7104">users: UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="507" x2="691" y1="258.3047" y2="258.3047"/><ellipse cx="517" cy="269.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="160" x="526" y="272.5151">update(data:UserData): void</text><!--MD5=[c74a6c0741d3f3f6cb875c0c9ba6c06c]
class UpdateAvatarUsecase--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="99.2188" id="UpdateAvatarUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="228" x="6" y="193"/><ellipse cx="46.2" cy="209" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M49.1688,214.6406 Q48.5906,214.9375 47.95,215.0781 Q47.3094,215.2344 46.6063,215.2344 Q44.1063,215.2344 42.7781,213.5938 Q41.4656,211.9375 41.4656,208.8125 Q41.4656,205.6875 42.7781,204.0313 Q44.1063,202.375 46.6063,202.375 Q47.3094,202.375 47.95,202.5313 Q48.6063,202.6875 49.1688,202.9844 L49.1688,205.7031 Q48.5438,205.125 47.95,204.8594 Q47.3563,204.5781 46.7313,204.5781 Q45.3875,204.5781 44.7,205.6563 Q44.0125,206.7188 44.0125,208.8125 Q44.0125,210.9063 44.7,211.9844 Q45.3875,213.0469 46.7313,213.0469 Q47.3563,213.0469 47.95,212.7813 Q48.5438,212.5 49.1688,211.9219 L49.1688,214.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="65.8" y="213.1543">UpdateAvatarUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="233" y1="225" y2="225"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="233"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="26" y="239.2104">users: UserRepository</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="245.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="26" y="252.0151">images: MediaRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="233" y1="258.6094" y2="258.6094"/><ellipse cx="17" cy="269.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="198" x="26" y="272.8198">upload_avatar(image: Bytes): UUID</text><ellipse cx="17" cy="282.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="202" x="26" y="285.6245">delete_avatar(image_id: UUID): void</text><!--MD5=[b50600dfb8dd2e0e1fc2b58f4ebea7a4]
class MediaRepository--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="60.8047" id="MediaRepository" style="stroke: #A80036; stroke-width: 1.5;" width="223" x="146.5" y="377.5"/><ellipse cx="202.25" cy="393.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M198.1719,389.2656 L198.1719,387.1094 L205.5625,387.1094 L205.5625,389.2656 L203.0938,389.2656 L203.0938,397.3438 L205.5625,397.3438 L205.5625,399.5 L198.1719,399.5 L198.1719,397.3438 L200.6406,397.3438 L200.6406,389.2656 L198.1719,389.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="103" x="222.75" y="397.6543">MediaRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="147.5" x2="368.5" y1="409.5" y2="409.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="147.5" x2="368.5" y1="417.5" y2="417.5"/><ellipse cx="157.5" cy="428.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="197" x="166.5" y="431.7104">upload_image(image: Bytes): UUID</text><!--MD5=[3fd616f346a44cd59a91eb10b19e157c]
class User--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="150.4375" id="User" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="1576.5" y="670"/><ellipse cx="1645.25" cy="686" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1648.2188,691.6406 Q1647.6406,691.9375 1647,692.0781 Q1646.3594,692.2344 1645.6563,692.2344 Q1643.1563,692.2344 1641.8281,690.5938 Q1640.5156,688.9375 1640.5156,685.8125 Q1640.5156,682.6875 1641.8281,681.0313 Q1643.1563,679.375 1645.6563,679.375 Q1646.3594,679.375 1647,679.5313 Q1647.6563,679.6875 1648.2188,679.9844 L1648.2188,682.7031 Q1647.5938,682.125 1647,681.8594 Q1646.4063,681.5781 1645.7813,681.5781 Q1644.4375,681.5781 1643.75,682.6563 Q1643.0625,683.7188 1643.0625,685.8125 Q1643.0625,687.9063 1643.75,688.9844 Q1644.4375,690.0469 1645.7813,690.0469 Q1646.4063,690.0469 1647,689.7813 Q1647.5938,689.5 1648.2188,688.9219 L1648.2188,691.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="29" x="1665.75" y="690.1543">User</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1577.5" x2="1750.5" y1="702" y2="702"/><ellipse cx="1587.5" cy="713" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="1596.5" y="716.2104">id: UUID</text><ellipse cx="1587.5" cy="725.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="1596.5" y="729.0151">email: EmailStr</text><ellipse cx="1587.5" cy="738.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="1596.5" y="741.8198">status: UserStatus</text><ellipse cx="1587.5" cy="751.4141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="1596.5" y="754.6245">password: PasswordHash</text><ellipse cx="1587.5" cy="764.2188" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="1596.5" y="767.4292">first_name: str</text><ellipse cx="1587.5" cy="777.0234" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="1596.5" y="780.2339">last_name: str</text><ellipse cx="1587.5" cy="789.8281" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="41" x="1596.5" y="793.0386">bio: str</text><ellipse cx="1587.5" cy="802.6328" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="1596.5" y="805.8433">photo: Media?</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1577.5" x2="1750.5" y1="812.4375" y2="812.4375"/><!--MD5=[51fd3fce36c976f35b405d5800336138]
class UserStatus--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="73.6094" id="UserStatus" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="1613" y="880"/><ellipse cx="1628" cy="896" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1632.1094,902 L1624.3906,902 L1624.3906,889.6094 L1632.1094,889.6094 L1632.1094,891.7656 L1626.8438,891.7656 L1626.8438,894.4375 L1631.6094,894.4375 L1631.6094,896.5938 L1626.8438,896.5938 L1626.8438,899.8438 L1632.1094,899.8438 L1632.1094,902 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="1642" y="900.1543">UserStatus</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1614" x2="1714" y1="912" y2="912"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="1619" y="926.2104">CREATED</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="1619" y="939.0151">VERIFIED</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1614" x2="1714" y1="945.6094" y2="945.6094"/><!--MD5=[9d93cc8568a88ed605ddd50c0dd874e2]
class Media--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="60.8047" id="Media" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="910.5" y="886.5"/><ellipse cx="925.5" cy="902.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M928.4688,908.1406 Q927.8906,908.4375 927.25,908.5781 Q926.6094,908.7344 925.9063,908.7344 Q923.4063,908.7344 922.0781,907.0938 Q920.7656,905.4375 920.7656,902.3125 Q920.7656,899.1875 922.0781,897.5313 Q923.4063,895.875 925.9063,895.875 Q926.6094,895.875 927.25,896.0313 Q927.9063,896.1875 928.4688,896.4844 L928.4688,899.2031 Q927.8438,898.625 927.25,898.3594 Q926.6563,898.0781 926.0313,898.0781 Q924.6875,898.0781 924,899.1563 Q923.3125,900.2188 923.3125,902.3125 Q923.3125,904.4063 924,905.4844 Q924.6875,906.5469 926.0313,906.5469 Q926.6563,906.5469 927.25,906.2813 Q927.8438,906 928.4688,905.4219 L928.4688,908.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="37" x="939.5" y="906.6543">Media</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="911.5" x2="978.5" y1="918.5" y2="918.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="916.5" y="932.7104">id: UUID</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="911.5" x2="978.5" y1="939.3047" y2="939.3047"/><!--MD5=[4e0cb3a35dd1c1245f8d628acd95dc8e]
class PostgresUserRepoImpl--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="60.8047" id="PostgresUserRepoImpl" style="stroke: #A80036; stroke-width: 1.5;" width="174" x="577" y="530"/><ellipse cx="592" cy="546" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M594.9688,551.6406 Q594.3906,551.9375 593.75,552.0781 Q593.1094,552.2344 592.4063,552.2344 Q589.9063,552.2344 588.5781,550.5938 Q587.2656,548.9375 587.2656,545.8125 Q587.2656,542.6875 588.5781,541.0313 Q589.9063,539.375 592.4063,539.375 Q593.1094,539.375 593.75,539.5313 Q594.4063,539.6875 594.9688,539.9844 L594.9688,542.7031 Q594.3438,542.125 593.75,541.8594 Q593.1563,541.5781 592.5313,541.5781 Q591.1875,541.5781 590.5,542.6563 Q589.8125,543.7188 589.8125,545.8125 Q589.8125,547.9063 590.5,548.9844 Q591.1875,550.0469 592.5313,550.0469 Q593.1563,550.0469 593.75,549.7813 Q594.3438,549.5 594.9688,548.9219 L594.9688,551.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="142" x="606" y="550.1543">PostgresUserRepoImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="578" x2="750" y1="562" y2="562"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="585" y="570"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="597" y="576.2104">db: PostgresConnection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="578" x2="750" y1="582.8047" y2="582.8047"/><!--MD5=[b3698407ef457bb1644431ba4b390d9f]
class MinioMediaRepoImpl--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="60.8047" id="MinioMediaRepoImpl" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="311" y="530"/><ellipse cx="326" cy="546" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M328.9688,551.6406 Q328.3906,551.9375 327.75,552.0781 Q327.1094,552.2344 326.4063,552.2344 Q323.9063,552.2344 322.5781,550.5938 Q321.2656,548.9375 321.2656,545.8125 Q321.2656,542.6875 322.5781,541.0313 Q323.9063,539.375 326.4063,539.375 Q327.1094,539.375 327.75,539.5313 Q328.4063,539.6875 328.9688,539.9844 L328.9688,542.7031 Q328.3438,542.125 327.75,541.8594 Q327.1563,541.5781 326.5313,541.5781 Q325.1875,541.5781 324.5,542.6563 Q323.8125,543.7188 323.8125,545.8125 Q323.8125,547.9063 324.5,548.9844 Q325.1875,550.0469 326.5313,550.0469 Q327.1563,550.0469 327.75,549.7813 Q328.3438,549.5 328.9688,548.9219 L328.9688,551.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="126" x="340" y="550.1543">MinioMediaRepoImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="312" x2="468" y1="562" y2="562"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="317" y="576.2104">credentials: str</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="312" x2="468" y1="582.8047" y2="582.8047"/><!--MD5=[0d3d67a6ef04163560c9e2439e3d19cf]
class NotificationsService--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="86.4141" id="NotificationsService" style="stroke: #A80036; stroke-width: 1.5;" width="287" x="866.5" y="365"/><ellipse cx="944.75" cy="381" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M940.6719,376.7656 L940.6719,374.6094 L948.0625,374.6094 L948.0625,376.7656 L945.5938,376.7656 L945.5938,384.8438 L948.0625,384.8438 L948.0625,387 L940.6719,387 L940.6719,384.8438 L943.1406,384.8438 L943.1406,376.7656 L940.6719,376.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="122" x="965.25" y="385.1543">NotificationsService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="867.5" x2="1152.5" y1="397" y2="397"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="867.5" x2="1152.5" y1="405" y2="405"/><ellipse cx="877.5" cy="416" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="165" x="886.5" y="419.2104">send_verification(user: UUID)</text><ellipse cx="877.5" cy="428.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="261" x="886.5" y="432.0151">send_chat_notification(from:UUID, user: UUID)</text><ellipse cx="877.5" cy="441.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="256" x="886.5" y="444.8198">send_friend_request(from: UUID, user: UUID)</text><!--MD5=[3b67181cff55c44d048f4f121abee1a0]
class Friendship--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="99.2188" id="Friendship" style="stroke: #A80036; stroke-width: 1.5;" width="159" x="1414.5" y="511"/><ellipse cx="1457.4" cy="527" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1460.3688,532.6406 Q1459.7906,532.9375 1459.15,533.0781 Q1458.5094,533.2344 1457.8063,533.2344 Q1455.3063,533.2344 1453.9781,531.5938 Q1452.6656,529.9375 1452.6656,526.8125 Q1452.6656,523.6875 1453.9781,522.0313 Q1455.3063,520.375 1457.8063,520.375 Q1458.5094,520.375 1459.15,520.5313 Q1459.8063,520.6875 1460.3688,520.9844 L1460.3688,523.7031 Q1459.7438,523.125 1459.15,522.8594 Q1458.5563,522.5781 1457.9313,522.5781 Q1456.5875,522.5781 1455.9,523.6563 Q1455.2125,524.7188 1455.2125,526.8125 Q1455.2125,528.9063 1455.9,529.9844 Q1456.5875,531.0469 1457.9313,531.0469 Q1458.5563,531.0469 1459.15,530.7813 Q1459.7438,530.5 1460.3688,529.9219 L1460.3688,532.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="65" x="1477.6" y="531.1543">Friendship</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1415.5" x2="1572.5" y1="543" y2="543"/><ellipse cx="1425.5" cy="554" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="1434.5" y="557.2104">user1: User</text><ellipse cx="1425.5" cy="566.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="1434.5" y="570.0151">user2: User</text><ellipse cx="1425.5" cy="579.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="1434.5" y="582.8198">initiator: User</text><ellipse cx="1425.5" cy="592.4141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="1434.5" y="595.6245">status: FriendshipState</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1415.5" x2="1572.5" y1="602.2188" y2="602.2188"/><!--MD5=[e63b9211106c992dfeff555517db0690]
class FriendshipState--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="86.4141" id="FriendshipState" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="1410.5" y="702"/><ellipse cx="1425.5" cy="718" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1429.6094,724 L1421.8906,724 L1421.8906,711.6094 L1429.6094,711.6094 L1429.6094,713.7656 L1424.3438,713.7656 L1424.3438,716.4375 L1429.1094,716.4375 L1429.1094,718.5938 L1424.3438,718.5938 L1424.3438,721.8438 L1429.6094,721.8438 L1429.6094,724 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="99" x="1439.5" y="722.1543">FriendshipState</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1411.5" x2="1540.5" y1="734" y2="734"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="1416.5" y="748.2104">PENDING</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="1416.5" y="761.0151">ACCEPTED</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="54" x="1416.5" y="773.8198">REJECTED</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1411.5" x2="1540.5" y1="780.4141" y2="780.4141"/><!--MD5=[6cdfd470e1bbf55dbabe19064434c1fb]
class FriendshipRepository--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="73.6094" id="FriendshipRepository" style="stroke: #A80036; stroke-width: 1.5;" width="262" x="1238" y="371"/><ellipse cx="1299.75" cy="387" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1295.6719,382.7656 L1295.6719,380.6094 L1303.0625,380.6094 L1303.0625,382.7656 L1300.5938,382.7656 L1300.5938,390.8438 L1303.0625,390.8438 L1303.0625,393 L1295.6719,393 L1295.6719,390.8438 L1298.1406,390.8438 L1298.1406,382.7656 L1295.6719,382.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="130" x="1320.25" y="391.1543">FriendshipRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1239" x2="1499" y1="403" y2="403"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1239" x2="1499" y1="411" y2="411"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="250" x="1244" y="425.2104">find_request(u1:User, u2:User): Friendship?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="1244" y="438.0151">save(link: Friendship)</text><!--MD5=[523dbd4e3789ae37f725fb38854f0b02]
class PostgresFriendshipRepoImpl--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="60.8047" id="PostgresFriendshipRepoImpl" style="stroke: #A80036; stroke-width: 1.5;" width="210" x="1169" y="530"/><ellipse cx="1184" cy="546" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1186.9688,551.6406 Q1186.3906,551.9375 1185.75,552.0781 Q1185.1094,552.2344 1184.4063,552.2344 Q1181.9063,552.2344 1180.5781,550.5938 Q1179.2656,548.9375 1179.2656,545.8125 Q1179.2656,542.6875 1180.5781,541.0313 Q1181.9063,539.375 1184.4063,539.375 Q1185.1094,539.375 1185.75,539.5313 Q1186.4063,539.6875 1186.9688,539.9844 L1186.9688,542.7031 Q1186.3438,542.125 1185.75,541.8594 Q1185.1563,541.5781 1184.5313,541.5781 Q1183.1875,541.5781 1182.5,542.6563 Q1181.8125,543.7188 1181.8125,545.8125 Q1181.8125,547.9063 1182.5,548.9844 Q1183.1875,550.0469 1184.5313,550.0469 Q1185.1563,550.0469 1185.75,549.7813 Q1186.3438,549.5 1186.9688,548.9219 L1186.9688,551.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="178" x="1198" y="550.1543">PostgresFriendshipRepoImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1170" x2="1378" y1="562" y2="562"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1177" y="570"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="1189" y="576.2104">db: PostgresConnection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1170" x2="1378" y1="582.8047" y2="582.8047"/><!--MD5=[0419ab1581269a7645cb09f0695b272b]
class GetFriendsUsecase--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="73.6094" id="GetFriendsUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="206" x="1316" y="205.5"/><ellipse cx="1354.4" cy="221.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1357.3688,227.1406 Q1356.7906,227.4375 1356.15,227.5781 Q1355.5094,227.7344 1354.8063,227.7344 Q1352.3063,227.7344 1350.9781,226.0938 Q1349.6656,224.4375 1349.6656,221.3125 Q1349.6656,218.1875 1350.9781,216.5313 Q1352.3063,214.875 1354.8063,214.875 Q1355.5094,214.875 1356.15,215.0313 Q1356.8063,215.1875 1357.3688,215.4844 L1357.3688,218.2031 Q1356.7438,217.625 1356.15,217.3594 Q1355.5563,217.0781 1354.9313,217.0781 Q1353.5875,217.0781 1352.9,218.1563 Q1352.2125,219.2188 1352.2125,221.3125 Q1352.2125,223.4063 1352.9,224.4844 Q1353.5875,225.5469 1354.9313,225.5469 Q1355.5563,225.5469 1356.15,225.2813 Q1356.7438,225 1357.3688,224.4219 L1357.3688,227.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="122" x="1373.6" y="225.6543">GetFriendsUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1317" x2="1521" y1="237.5" y2="237.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1324" y="245.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="1336" y="251.7104">friends: FriendshipRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1317" x2="1521" y1="258.3047" y2="258.3047"/><ellipse cx="1327" cy="269.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="180" x="1336" y="272.5151">list(friends_of: UUID): List[UUID]</text><!--MD5=[3b636ee9afbb1c3bdd0c4f37f67f4233]
class FriendRequestUsecase--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="124.8281" id="FriendRequestUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="218" x="1063" y="180"/><ellipse cx="1096.45" cy="196" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1099.4188,201.6406 Q1098.8406,201.9375 1098.2,202.0781 Q1097.5594,202.2344 1096.8563,202.2344 Q1094.3563,202.2344 1093.0281,200.5938 Q1091.7156,198.9375 1091.7156,195.8125 Q1091.7156,192.6875 1093.0281,191.0313 Q1094.3563,189.375 1096.8563,189.375 Q1097.5594,189.375 1098.2,189.5313 Q1098.8563,189.6875 1099.4188,189.9844 L1099.4188,192.7031 Q1098.7938,192.125 1098.2,191.8594 Q1097.6063,191.5781 1096.9813,191.5781 Q1095.6375,191.5781 1094.95,192.6563 Q1094.2625,193.7188 1094.2625,195.8125 Q1094.2625,197.9063 1094.95,198.9844 Q1095.6375,200.0469 1096.9813,200.0469 Q1097.6063,200.0469 1098.2,199.7813 Q1098.7938,199.5 1099.4188,198.9219 L1099.4188,201.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="145" x="1114.55" y="200.1543">FriendRequestUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1064" x2="1280" y1="212" y2="212"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1071" y="220"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="1083" y="226.2104">friends: FriendshipRepository</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1071" y="232.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="1083" y="239.0151">users: UserRepository</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1071" y="245.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="1083" y="251.8198">notifications: NotificationsService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1064" x2="1280" y1="258.4141" y2="258.4141"/><ellipse cx="1074" cy="269.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="192" x="1083" y="272.6245">accept(from: UUID, to: UUID): void</text><ellipse cx="1074" cy="282.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="183" x="1083" y="285.4292">send(from: UUID, to: UUID): void</text><ellipse cx="1074" cy="295.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="1083" y="298.2339">reject(from: UUID, to: UUID): void</text><!--MD5=[0a8a9a553ad28d76d3a1fd3918a25a86]
class Rating--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="86.4141" id="Rating" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="1627" y="517.5"/><ellipse cx="1642.9" cy="533.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1645.8688,539.1406 Q1645.2906,539.4375 1644.65,539.5781 Q1644.0094,539.7344 1643.3063,539.7344 Q1640.8063,539.7344 1639.4781,538.0938 Q1638.1656,536.4375 1638.1656,533.3125 Q1638.1656,530.1875 1639.4781,528.5313 Q1640.8063,526.875 1643.3063,526.875 Q1644.0094,526.875 1644.65,527.0313 Q1645.3063,527.1875 1645.8688,527.4844 L1645.8688,530.2031 Q1645.2438,529.625 1644.65,529.3594 Q1644.0563,529.0781 1643.4313,529.0781 Q1642.0875,529.0781 1641.4,530.1563 Q1640.7125,531.2188 1640.7125,533.3125 Q1640.7125,535.4063 1641.4,536.4844 Q1642.0875,537.5469 1643.4313,537.5469 Q1644.0563,537.5469 1644.65,537.2813 Q1645.2438,537 1645.8688,536.4219 L1645.8688,539.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="40" x="1657.1" y="537.6543">Rating</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1628" x2="1700" y1="549.5" y2="549.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="1633" y="563.7104">from: User</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="46" x="1633" y="576.5151">to: User</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="1633" y="589.3198">value: int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1628" x2="1700" y1="595.9141" y2="595.9141"/><!--MD5=[baa0b6c6124de993ef56355f49171694]
class RatingRepository--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="86.4141" id="RatingRepository" style="stroke: #A80036; stroke-width: 1.5;" width="217" x="1561.5" y="365"/><ellipse cx="1612.75" cy="381" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1608.6719,376.7656 L1608.6719,374.6094 L1616.0625,374.6094 L1616.0625,376.7656 L1613.5938,376.7656 L1613.5938,384.8438 L1616.0625,384.8438 L1616.0625,387 L1608.6719,387 L1608.6719,384.8438 L1611.1406,384.8438 L1611.1406,376.7656 L1608.6719,376.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="106" x="1633.25" y="385.1543">RatingRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1562.5" x2="1777.5" y1="397" y2="397"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1562.5" x2="1777.5" y1="405" y2="405"/><ellipse cx="1572.5" cy="416" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="191" x="1581.5" y="419.2104">get(from: UUID, to: UUID): Rating?</text><ellipse cx="1572.5" cy="428.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="1581.5" y="432.0151">save(rating: Rating): Rating</text><ellipse cx="1572.5" cy="441.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="1581.5" y="444.8198">compute(of: UUID): float?</text><!--MD5=[a8345556ef49c770a74f7526127eac91]
class RatingsUsecase--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="86.4141" id="RatingsUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="280" x="1557" y="199.5"/><ellipse cx="1642.25" cy="215.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1645.2188,221.1406 Q1644.6406,221.4375 1644,221.5781 Q1643.3594,221.7344 1642.6563,221.7344 Q1640.1563,221.7344 1638.8281,220.0938 Q1637.5156,218.4375 1637.5156,215.3125 Q1637.5156,212.1875 1638.8281,210.5313 Q1640.1563,208.875 1642.6563,208.875 Q1643.3594,208.875 1644,209.0313 Q1644.6563,209.1875 1645.2188,209.4844 L1645.2188,212.2031 Q1644.5938,211.625 1644,211.3594 Q1643.4063,211.0781 1642.7813,211.0781 Q1641.4375,211.0781 1640.75,212.1563 Q1640.0625,213.2188 1640.0625,215.3125 Q1640.0625,217.4063 1640.75,218.4844 Q1641.4375,219.5469 1642.7813,219.5469 Q1643.4063,219.5469 1644,219.2813 Q1644.5938,219 1645.2188,218.4219 L1645.2188,221.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="101" x="1662.75" y="219.6543">RatingsUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1558" x2="1836" y1="231.5" y2="231.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1565" y="239.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="1577" y="245.7104">ratings: RatingRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1558" x2="1836" y1="252.3047" y2="252.3047"/><ellipse cx="1568" cy="263.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="254" x="1577" y="266.5151">update(from: UUID, to: UUID, value: int): void</text><ellipse cx="1568" cy="276.1094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="1577" y="279.3198">get_value(user: UUID): float?</text><!--MD5=[bea5b0d46523efab5ea1c1d339f396f0]
class Message--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="86.4141" id="Message" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="1736.5" y="517.5"/><ellipse cx="1763.65" cy="533.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1766.6188,539.1406 Q1766.0406,539.4375 1765.4,539.5781 Q1764.7594,539.7344 1764.0563,539.7344 Q1761.5563,539.7344 1760.2281,538.0938 Q1758.9156,536.4375 1758.9156,533.3125 Q1758.9156,530.1875 1760.2281,528.5313 Q1761.5563,526.875 1764.0563,526.875 Q1764.7594,526.875 1765.4,527.0313 Q1766.0563,527.1875 1766.6188,527.4844 L1766.6188,530.2031 Q1765.9938,529.625 1765.4,529.3594 Q1764.8063,529.0781 1764.1813,529.0781 Q1762.8375,529.0781 1762.15,530.1563 Q1761.4625,531.2188 1761.4625,533.3125 Q1761.4625,535.4063 1762.15,536.4844 Q1762.8375,537.5469 1764.1813,537.5469 Q1764.8063,537.5469 1765.4,537.2813 Q1765.9938,537 1766.6188,536.4219 L1766.6188,539.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="1780.35" y="537.6543">Message</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1737.5" x2="1850.5" y1="549.5" y2="549.5"/><ellipse cx="1747.5" cy="560.5" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="75" x="1756.5" y="563.7104">sender: User</text><ellipse cx="1747.5" cy="573.3047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="1756.5" y="576.5151">text: str</text><ellipse cx="1747.5" cy="586.1094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="1756.5" y="589.3198">order: datetime</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1737.5" x2="1850.5" y1="595.9141" y2="595.9141"/><!--MD5=[50d4997affe4b7e1b12b08ba12feba96]
class Chat--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="86.4141" id="Chat" style="stroke: #A80036; stroke-width: 1.5;" width="173" x="1818.5" y="365"/><ellipse cx="1886.25" cy="381" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1889.2188,386.6406 Q1888.6406,386.9375 1888,387.0781 Q1887.3594,387.2344 1886.6563,387.2344 Q1884.1563,387.2344 1882.8281,385.5938 Q1881.5156,383.9375 1881.5156,380.8125 Q1881.5156,377.6875 1882.8281,376.0313 Q1884.1563,374.375 1886.6563,374.375 Q1887.3594,374.375 1888,374.5313 Q1888.6563,374.6875 1889.2188,374.9844 L1889.2188,377.7031 Q1888.5938,377.125 1888,376.8594 Q1887.4063,376.5781 1886.7813,376.5781 Q1885.4375,376.5781 1884.75,377.6563 Q1884.0625,378.7188 1884.0625,380.8125 Q1884.0625,382.9063 1884.75,383.9844 Q1885.4375,385.0469 1886.7813,385.0469 Q1887.4063,385.0469 1888,384.7813 Q1888.5938,384.5 1889.2188,383.9219 L1889.2188,386.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="29" x="1906.75" y="385.1543">Chat</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1819.5" x2="1990.5" y1="397" y2="397"/><ellipse cx="1829.5" cy="408" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="1838.5" y="411.2104">u1: User</text><ellipse cx="1829.5" cy="420.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="1838.5" y="424.0151">u2: User</text><ellipse cx="1829.5" cy="433.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="1838.5" y="436.8198">messages: List[Message]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1819.5" x2="1990.5" y1="443.4141" y2="443.4141"/><path d="M2026.5,395.5 L2026.5,404 L1991.86,408 L2026.5,412 L2026.5,420.6328 A0,0 0 0 0 2026.5,420.6328 L2191.5,420.6328 A0,0 0 0 0 2191.5,420.6328 L2191.5,405.5 L2181.5,395.5 L2026.5,395.5 A0,0 0 0 0 2026.5,395.5 " fill="#FBFB77" filter="url(#fd8kddooxek6d)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2181.5,395.5 L2181.5,405.5 L2191.5,405.5 L2181.5,395.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="2032.5" y="412.5669">invariant: u1.id &lt; u2.id</text><!--MD5=[ab71ee5346321a0c39dada4dce0eee4e]
class ChatRepository--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="86.4141" id="ChatRepository" style="stroke: #A80036; stroke-width: 1.5;" width="364" x="1872" y="199.5"/><ellipse cx="2002.25" cy="215.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1998.1719,211.2656 L1998.1719,209.1094 L2005.5625,209.1094 L2005.5625,211.2656 L2003.0938,211.2656 L2003.0938,219.3438 L2005.5625,219.3438 L2005.5625,221.5 L1998.1719,221.5 L1998.1719,219.3438 L2000.6406,219.3438 L2000.6406,211.2656 L1998.1719,211.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="95" x="2022.75" y="219.6543">ChatRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1873" x2="2235" y1="231.5" y2="231.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1873" x2="2235" y1="239.5" y2="239.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="185" x="1878" y="253.7104">list_chats(user: UUID): List[Chat]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="348" x="1878" y="266.5151">get_messages(u1: UUID, u2: UUID, offset: int): List[Message]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="352" x="1878" y="279.3198">create_message(from: UUID, to: UUID, content: str): Message</text><!--MD5=[0aa9b71e4e80e7c418f11eab1a1a5bef]
class ChatUsecase--><rect fill="#FEFECE" filter="url(#fd8kddooxek6d)" height="112.0234" id="ChatUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="384" x="1340" y="8"/><ellipse cx="1486.25" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1489.2188,29.6406 Q1488.6406,29.9375 1488,30.0781 Q1487.3594,30.2344 1486.6563,30.2344 Q1484.1563,30.2344 1482.8281,28.5938 Q1481.5156,26.9375 1481.5156,23.8125 Q1481.5156,20.6875 1482.8281,19.0313 Q1484.1563,17.375 1486.6563,17.375 Q1487.3594,17.375 1488,17.5313 Q1488.6563,17.6875 1489.2188,17.9844 L1489.2188,20.7031 Q1488.5938,20.125 1488,19.8594 Q1487.4063,19.5781 1486.7813,19.5781 Q1485.4375,19.5781 1484.75,20.6563 Q1484.0625,21.7188 1484.0625,23.8125 Q1484.0625,25.9063 1484.75,26.9844 Q1485.4375,28.0469 1486.7813,28.0469 Q1487.4063,28.0469 1488,27.7813 Q1488.5938,27.5 1489.2188,26.9219 L1489.2188,29.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="83" x="1506.75" y="28.1543">ChatUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1341" x2="1723" y1="40" y2="40"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1348" y="48"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="1360" y="54.2104">notifications: NotificationsService</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1348" y="60.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="1360" y="67.0151">chats: ChatRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1341" x2="1723" y1="73.6094" y2="73.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="186" x="1346" y="87.8198">get_chats(user: UUID): List[Chat]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="348" x="1346" y="100.6245">get_messages(u1: UUID, u2: UUID, offset: int): List[Message]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="372" x="1346" y="113.4292">send_message(from: UUID, to: UUID, content: str): List[Message]</text><!--MD5=[4b8c278432ef96c74d8b249bf3febe7b]
link RegisterUserUsecase to UserRepository--><path d="M802.5,279.79 C776.32,303.83 741.78,335.56 713.74,361.31 " fill="none" id="RegisterUserUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="710,364.75,719.334,361.6073,713.6822,361.3675,713.922,355.7157,710,364.75" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4f2dab73436ed5fec1bfe8a8667c44c1]
link GetUserUsecase to UserRepository--><path d="M434.88,279.58 C478.79,304 537.08,336.42 583.88,362.44 " fill="none" id="GetUserUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="588.37,364.94,582.4452,357.0726,583.9992,362.5118,578.56,364.0658,588.37,364.94" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[001e43dab09f39a011f2efbd4d80c76d]
link UpdateProfileUsecase to UserRepository--><path d="M613.43,279.79 C622.83,303.43 635.19,334.52 645.33,360.05 " fill="none" id="UpdateProfileUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="647.2,364.75,647.5714,354.9081,645.343,360.1076,640.1436,357.8793,647.2,364.75" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[494d444a6b75cdd5db5ae73d27579f28]
link UpdateAvatarUsecase to UserRepository--><path d="M218.2,292.12 C229.14,296.78 240.22,301.18 251,305 C352.53,340.97 472.42,369.07 556.8,386.58 " fill="none" id="UpdateAvatarUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="561.8,387.61,553.801,381.8641,556.9044,386.5937,552.1748,389.6971,561.8,387.61" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8661c1cc068a72c9331281a705d387f6]
link UpdateAvatarUsecase to MediaRepository--><path d="M161.03,292.11 C183.11,318.27 209.79,349.89 229.57,373.32 " fill="none" id="UpdateAvatarUsecase-&gt;MediaRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="232.94,377.3,230.1959,367.8411,229.7167,373.4777,224.0802,372.9984,232.94,377.3" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[bb813e58dcb6d929d30ff5a4a5d12263]
reverse link User to Media--><path d="M1564.42,817.7 C1562.62,818.5 1560.81,819.27 1559,820 C1350.97,904.18 1075.65,914.94 979.72,916.02 " fill="none" id="User&lt;-Media" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1576.27,811.96,1569.1261,810.9777,1565.4718,817.1943,1572.6157,818.1766,1576.27,811.96" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[bf2fdfe05571cb59ff2fe6a1a06cc23c]
reverse link User to UserStatus--><path d="M1664,833.28 C1664,849.77 1664,866.15 1664,879.93 " fill="none" id="User&lt;-UserStatus" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1664,820.07,1660,826.07,1664,832.07,1668,826.07,1664,820.07" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[70653a2b8f9805ba601a3bf0c9ed9be5]
reverse link UserRepository to User--><path d="M759.74,456.77 C856.2,502.9 1010.48,571.3 1151,610 C1327.71,658.66 1388.79,602.02 1559,670 C1564.8,672.32 1570.59,675.01 1576.29,677.97 " fill="none" id="UserRepository&lt;-User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="747.97,451.11,751.6487,457.3122,758.7887,456.3019,755.11,450.0997,747.97,451.11" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[26c5245289d516ed542d2899a122cdd0]
reverse link UserRepository to PostgresUserRepoImpl--><path d="M664,471.33 C664,491.59 664,513.15 664,529.88 " fill="none" id="UserRepository&lt;-PostgresUserRepoImpl" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="657,471.32,664,451.32,671,471.32,657,471.32" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[85469d579ea478cae1c05ebed7375266]
reverse link MediaRepository to Media--><path d="M254.61,451.69 C253.39,495.75 258.1,564.31 293,610 C455.03,822.17 800.28,893.28 910.45,911.04 " fill="none" id="MediaRepository&lt;-Media" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="255.17,438.58,250.9229,444.4077,254.6688,450.5695,258.9159,444.7418,255.17,438.58" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[22586ff5f87c37ec0898f065d9c1de38]
reverse link MediaRepository to MinioMediaRepoImpl--><path d="M297.45,453.98 C318.97,478.51 345.01,508.2 363.98,529.83 " fill="none" id="MediaRepository&lt;-MinioMediaRepoImpl" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="292,458.39,284.08,438.73,302.53,449.15,292,458.39" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b54a3f9d603b3bf6dde7dee46194db01]
link RegisterUserUsecase to NotificationsService--><path d="M879.28,279.79 C903.89,303.73 936.32,335.3 962.73,361 " fill="none" id="RegisterUserUsecase-&gt;NotificationsService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="966.58,364.75,962.9148,355.6085,962.9948,361.2648,957.3385,361.3448,966.58,364.75" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[0b93ce3a17968920a9643cf885986b25]
reverse link Friendship to FriendshipState--><path d="M1487.88,623.52 C1485.34,649.3 1482.45,678.56 1480.16,701.78 " fill="none" id="Friendship&lt;-FriendshipState" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1489.18,610.41,1484.6126,615.9902,1488.0068,622.3525,1492.5743,616.7723,1489.18,610.41" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[6e59cc6eb94ffb2325a27bfd6ddcd767]
reverse link Friendship to User--><path d="M1548.55,620.06 C1563.32,635.92 1579.5,653.29 1594.96,669.88 " fill="none" id="Friendship&lt;-User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1539.56,610.41,1540.7205,617.5271,1547.7365,619.1932,1546.576,612.0761,1539.56,610.41" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1579.9984" y="659.0577">3</text><!--MD5=[9278a4db87134efe22e65567c6d1c4ad]
reverse link FriendshipRepository to Friendship--><path d="M1407.31,455.13 C1422,472.82 1438.8,493.04 1453.67,510.94 " fill="none" id="FriendshipRepository&lt;-Friendship" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1398.94,445.05,1399.7002,452.2209,1406.6118,454.2773,1405.8517,447.1064,1398.94,445.05" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[59d3a531ac47398acd15a22f8ef4d1ed]
reverse link FriendshipRepository to PostgresFriendshipRepoImpl--><path d="M1335.49,462.08 C1321.14,484.82 1304.92,510.52 1292.74,529.81 " fill="none" id="FriendshipRepository&lt;-PostgresFriendshipRepoImpl" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1329.65,458.22,1346.25,445.05,1341.49,465.7,1329.65,458.22" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[3406471606f8843b6e9c1a52300f4c39]
link GetFriendsUsecase to FriendshipRepository--><path d="M1407.9,279.79 C1400.1,305.29 1389.65,339.46 1381.55,365.96 " fill="none" id="GetFriendsUsecase-&gt;FriendshipRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1380.07,370.82,1386.5383,363.393,1381.5394,366.0408,1378.8916,361.0419,1380.07,370.82" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[914926d311a2ca9550e2a6621a7d93db]
link FriendRequestUsecase to NotificationsService--><path d="M1110.75,305.31 C1092.43,323.81 1072.67,343.75 1055.54,361.04 " fill="none" id="FriendRequestUsecase-&gt;NotificationsService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1051.7,364.91,1060.878,361.3373,1055.2212,361.3602,1055.1983,355.7034,1051.7,364.91" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[69fc47a81207c237ec188d724843a255]
link FriendRequestUsecase to FriendshipRepository--><path d="M1246.2,305.08 C1271.46,326.04 1298.99,348.9 1321.58,367.64 " fill="none" id="FriendRequestUsecase-&gt;FriendshipRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1325.44,370.85,1321.0641,362.0267,1321.5907,367.6589,1315.9584,368.1855,1325.44,370.85" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[2cf7c2302ec48e39cf53c4e9dd09deba]
link FriendRequestUsecase to UserRepository--><path d="M1062.71,278.68 C976.42,306.45 856.7,344.98 771.01,372.56 " fill="none" id="FriendRequestUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="766.18,374.11,775.9713,375.1735,770.9416,372.5846,773.5306,367.5549,766.18,374.11" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[7df1310d9f5b50d284c38b4b9283908e]
link Rating to User--><path d="M1664,603.83 C1664,621.96 1664,643.75 1664,664.69 " fill="none" id="Rating-&gt;User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1664,669.7,1668,660.7,1664,664.7,1660,660.7,1664,669.7" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1655.6188" y="658.8605">2</text><!--MD5=[be7a7871b40b052ef0f195f85c6ac0dc]
reverse link RatingRepository to Rating--><path d="M1667.79,464.37 C1667.09,481.93 1666.33,501.04 1665.67,517.49 " fill="none" id="RatingRepository&lt;-Rating" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1668.31,451.32,1664.0757,457.157,1667.8351,463.3106,1672.0694,457.4736,1668.31,451.32" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[67c2091cc910f71dec9d812cfa60579c]
link RatingsUsecase to RatingRepository--><path d="M1690.05,285.61 C1686.31,308.21 1681.7,336.16 1677.84,359.53 " fill="none" id="RatingsUsecase-&gt;RatingRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1676.98,364.75,1682.3897,356.5199,1677.7927,359.8165,1674.4961,355.2195,1676.98,364.75" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[291b61393bea30c3ece0603e5ad87f6e]
link Chat to User--><path d="M1906.82,451.03 C1906.69,494.34 1900.69,562.1 1869,610 C1841.72,651.23 1796.94,682.65 1756.18,704.66 " fill="none" id="Chat-&gt;User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1751.74,707.03,1761.5632,706.3192,1756.1506,704.6748,1757.7949,699.2622,1751.74,707.03" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1759.6239" y="700.1762">2</text><!--MD5=[0e57511ddfa407e901127168a4cd2134]
reverse link Chat to Message--><path d="M1866.05,461.8 C1852.6,480.05 1837.71,500.23 1824.98,517.49 " fill="none" id="Chat&lt;-Message" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1873.78,451.32,1866.997,453.7678,1866.6477,460.9704,1873.4306,458.5226,1873.78,451.32" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[249b8abd4e729a16b977da04c600c214]
link Message to User--><path d="M1763.85,603.83 C1750.77,622.19 1735.02,644.3 1719.93,665.48 " fill="none" id="Message-&gt;User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1716.92,669.7,1725.3994,664.6901,1719.8208,665.6275,1718.8834,660.0488,1716.92,669.7" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[051f5d6458d24b0910ba2e55fa7d036e]
reverse link ChatRepository to Chat--><path d="M2006.8,295.29 C1986.4,317.68 1962.82,343.55 1943.5,364.75 " fill="none" id="ChatRepository&lt;-Chat" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="2015.63,285.61,2008.6325,287.3522,2007.5494,294.4815,2014.5469,292.7393,2015.63,285.61" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[d6d223b4c24de32bf7e0fbd1fc0963a2]
link ChatUsecase to ChatRepository--><path d="M1695.02,120.12 C1768.93,145.11 1855.1,174.25 1924.49,197.71 " fill="none" id="ChatUsecase-&gt;ChatRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1929.45,199.39,1922.2069,192.7164,1924.7138,197.7874,1919.6427,200.2943,1929.45,199.39" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ada288d3b84e29bca0b3af1461cda329]
link ChatUsecase to NotificationsService--><path d="M1340,88.16 C1221.77,106.49 1085.35,136.33 1045,180 C1000.39,228.28 998.72,308.5 1003.18,359.51 " fill="none" id="ChatUsecase-&gt;NotificationsService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1003.66,364.66,1006.8191,355.3315,1003.2022,359.681,998.8527,356.0641,1003.66,364.66" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[9b277e0ddaee597772c3f53ec4a7bb89]
@startuml classes

class RegisterUserUsecase {
    - users: UserRepository
    + create_user(data: UserData): User?
}
RegisterUserUsecase - -> UserRepository


class GetUserUsecase {
    - users: UserRepository
    + get_user(user_id: UUID): User?
}
GetUserUsecase - -> UserRepository

class UpdateProfileUsecase {
    - users: UserRepository
    + update(data:UserData): void
}
UpdateProfileUsecase - -> UserRepository


class UpdateAvatarUsecase {
    - users: UserRepository
    - images: MediaRepository
    + upload_avatar(image: Bytes): UUID
    + delete_avatar(image_id: UUID): void
}
UpdateAvatarUsecase - -> UserRepository
UpdateAvatarUsecase - -> MediaRepository


class User {
    + id: UUID
    + email: EmailStr
    + status: UserStatus
    + password: PasswordHash
    + first_name: str
    + last_name: str
    + bio: str
    + photo: Media?
}

enum UserStatus {
    CREATED
    VERIFIED
}

User *- - Media

User *- - UserStatus

class Media {
    id: UUID
}

interface UserRepository {
    + get(id:UUID): User?
    + get_by_email(email: str): User?
    + save(user: User): User
}


UserRepository o- - User

class PostgresUserRepoImpl {
    - db: PostgresConnection
}

PostgresUserRepoImpl -u-|> UserRepository

interface MediaRepository {
    + upload_image(image: Bytes): UUID
}

MediaRepository o- - Media

class MinioMediaRepoImpl {
    credentials: str
}

MinioMediaRepoImpl -u-|> MediaRepository

RegisterUserUsecase - -> NotificationsService

interface NotificationsService {
    + send_verification(user: UUID)
    + send_chat_notification(from:UUID, user: UUID)
    + send_friend_request(from: UUID, user: UUID)
}

class Friendship {
    + user1: User
    + user2: User
    + initiator: User
    + status: FriendshipState
}



enum FriendshipState {
    PENDING
    ACCEPTED
    REJECTED
}

Friendship *- - FriendshipState

Friendship o- - "3" User

interface FriendshipRepository {
    find_request(u1:User, u2:User): Friendship?
    save(link: Friendship)
}

FriendshipRepository o- - Friendship

class PostgresFriendshipRepoImpl {
    - db: PostgresConnection
}

PostgresFriendshipRepoImpl -up-|> FriendshipRepository

class GetFriendsUsecase {
    - friends: FriendshipRepository

    + list(friends_of: UUID): List[UUID]
}

GetFriendsUsecase - -> FriendshipRepository

class FriendRequestUsecase {
    - friends: FriendshipRepository
    - users: UserRepository
    - notifications: NotificationsService

    + accept(from: UUID, to: UUID): void
    + send(from: UUID, to: UUID): void
    + reject(from: UUID, to: UUID): void
}


FriendRequestUsecase - -> NotificationsService
FriendRequestUsecase - -> FriendshipRepository
FriendRequestUsecase - -> UserRepository

class Rating {
    from: User
    to: User
    value: int
}

Rating - -> "2" User

interface RatingRepository {
    + get(from: UUID, to: UUID): Rating?
    + save(rating: Rating): Rating
    + compute(of: UUID): float?
}

RatingRepository o- - Rating

class RatingsUsecase {
    - ratings: RatingRepository

    + update(from: UUID, to: UUID, value: int): void
    + get_value(user: UUID): float?
}

RatingsUsecase - -> RatingRepository

class Message {
    + sender: User
    + text: str
    + order: datetime
}

class Chat {
    + u1: User
    + u2: User
    + messages: List[Message]
}

note right of Chat: invariant: u1.id < u2.id

Chat - -> "2" User

Chat o- - Message
Message - -> User

interface ChatRepository {
    list_chats(user: UUID): List[Chat]
    get_messages(u1: UUID, u2: UUID, offset: int): List[Message]
    create_message(from: UUID, to: UUID, content: str): Message
}

ChatRepository o- - Chat

class ChatUsecase {
    - notifications: NotificationsService
    - chats: ChatRepository

    get_chats(user: UUID): List[Chat]
    get_messages(u1: UUID, u2: UUID, offset: int): List[Message]
    send_message(from: UUID, to: UUID, content: str): List[Message]
}

ChatUsecase - -> ChatRepository
ChatUsecase - -> NotificationsService

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.9+11-Ubuntu-0ubuntu1
Operating System: Linux
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>