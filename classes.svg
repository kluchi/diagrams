<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="792px" preserveAspectRatio="none" style="width:1645px;height:792px;" version="1.1" viewBox="0 0 1645 792" width="1645px" zoomAndPan="magnify"><defs><filter height="300%" id="fat914qxa5xmu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[ba9f6df479a4471835432ec83e0d111a]
class RegisterUserUsecase--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="73.6094" id="RegisterUserUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="167" x="657.5" y="33.5"/><ellipse cx="672.5" cy="49.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M675.4688,55.1406 Q674.8906,55.4375 674.25,55.5781 Q673.6094,55.7344 672.9063,55.7344 Q670.4063,55.7344 669.0781,54.0938 Q667.7656,52.4375 667.7656,49.3125 Q667.7656,46.1875 669.0781,44.5313 Q670.4063,42.875 672.9063,42.875 Q673.6094,42.875 674.25,43.0313 Q674.9063,43.1875 675.4688,43.4844 L675.4688,46.2031 Q674.8438,45.625 674.25,45.3594 Q673.6563,45.0781 673.0313,45.0781 Q671.6875,45.0781 671,46.1563 Q670.3125,47.2188 670.3125,49.3125 Q670.3125,51.4063 671,52.4844 Q671.6875,53.5469 673.0313,53.5469 Q673.6563,53.5469 674.25,53.2813 Q674.8438,53 675.4688,52.4219 L675.4688,55.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="135" x="686.5" y="53.6543">RegisterUserUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="658.5" x2="823.5" y1="65.5" y2="65.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="665.5" y="73.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="677.5" y="79.7104">users: UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="658.5" x2="823.5" y1="86.3047" y2="86.3047"/><ellipse cx="668.5" cy="97.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="677.5" y="100.5151">create_user(data)</text><!--MD5=[093c210125347143eef5bb9199eae634]
class UserRepository--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="86.4141" id="UserRepository" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="431" y="193"/><ellipse cx="470.3" cy="209" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M466.2219,204.7656 L466.2219,202.6094 L473.6125,202.6094 L473.6125,204.7656 L471.1438,204.7656 L471.1438,212.8438 L473.6125,212.8438 L473.6125,215 L466.2219,215 L466.2219,212.8438 L468.6906,212.8438 L468.6906,204.7656 L466.2219,204.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="94" x="489.7" y="213.1543">UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="432" x2="610" y1="225" y2="225"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="432" x2="610" y1="233" y2="233"/><ellipse cx="442" cy="244" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="451" y="247.2104">get(id:UUID): User?</text><ellipse cx="442" cy="256.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="451" y="260.0151">get_by_email(email): User?</text><ellipse cx="442" cy="269.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="96" x="451" y="272.8198">save(user): User</text><!--MD5=[a584bac4041b1810714c0393b312edd2]
class GetUserUsecase--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="73.6094" id="GetUserUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="420" y="33.5"/><ellipse cx="464.25" cy="49.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M467.2188,55.1406 Q466.6406,55.4375 466,55.5781 Q465.3594,55.7344 464.6563,55.7344 Q462.1563,55.7344 460.8281,54.0938 Q459.5156,52.4375 459.5156,49.3125 Q459.5156,46.1875 460.8281,44.5313 Q462.1563,42.875 464.6563,42.875 Q465.3594,42.875 466,43.0313 Q466.6563,43.1875 467.2188,43.4844 L467.2188,46.2031 Q466.5938,45.625 466,45.3594 Q465.4063,45.0781 464.7813,45.0781 Q463.4375,45.0781 462.75,46.1563 Q462.0625,47.2188 462.0625,49.3125 Q462.0625,51.4063 462.75,52.4844 Q463.4375,53.5469 464.7813,53.5469 Q465.4063,53.5469 466,53.2813 Q466.5938,53 467.2188,52.4219 L467.2188,55.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="484.75" y="53.6543">GetUserUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="421" x2="621" y1="65.5" y2="65.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="428" y="73.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="440" y="79.7104">users: UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="421" x2="621" y1="86.3047" y2="86.3047"/><ellipse cx="431" cy="97.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="176" x="440" y="100.5151">get_user(user_id: UUID): User?</text><!--MD5=[edf600919611ef5674778c5101389237]
class UpdateProfileUsecase--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="73.6094" id="UpdateProfileUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="213.5" y="33.5"/><ellipse cx="228.5" cy="49.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M231.4688,55.1406 Q230.8906,55.4375 230.25,55.5781 Q229.6094,55.7344 228.9063,55.7344 Q226.4063,55.7344 225.0781,54.0938 Q223.7656,52.4375 223.7656,49.3125 Q223.7656,46.1875 225.0781,44.5313 Q226.4063,42.875 228.9063,42.875 Q229.6094,42.875 230.25,43.0313 Q230.9063,43.1875 231.4688,43.4844 L231.4688,46.2031 Q230.8438,45.625 230.25,45.3594 Q229.6563,45.0781 229.0313,45.0781 Q227.6875,45.0781 227,46.1563 Q226.3125,47.2188 226.3125,49.3125 Q226.3125,51.4063 227,52.4844 Q227.6875,53.5469 229.0313,53.5469 Q229.6563,53.5469 230.25,53.2813 Q230.8438,53 231.4688,52.4219 L231.4688,55.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="139" x="242.5" y="53.6543">UpdateProfileUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="214.5" x2="383.5" y1="65.5" y2="65.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="221.5" y="73.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="233.5" y="79.7104">users: UserRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="214.5" x2="383.5" y1="86.3047" y2="86.3047"/><ellipse cx="224.5" cy="97.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="233.5" y="100.5151">update(user_data): void</text><!--MD5=[c74a6c0741d3f3f6cb875c0c9ba6c06c]
class UpdateAvatarUsecase--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="99.2188" id="UpdateAvatarUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="172" x="6" y="21"/><ellipse cx="21" cy="37" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M23.9688,42.6406 Q23.3906,42.9375 22.75,43.0781 Q22.1094,43.2344 21.4063,43.2344 Q18.9063,43.2344 17.5781,41.5938 Q16.2656,39.9375 16.2656,36.8125 Q16.2656,33.6875 17.5781,32.0313 Q18.9063,30.375 21.4063,30.375 Q22.1094,30.375 22.75,30.5313 Q23.4063,30.6875 23.9688,30.9844 L23.9688,33.7031 Q23.3438,33.125 22.75,32.8594 Q22.1563,32.5781 21.5313,32.5781 Q20.1875,32.5781 19.5,33.6563 Q18.8125,34.7188 18.8125,36.8125 Q18.8125,38.9063 19.5,39.9844 Q20.1875,41.0469 21.5313,41.0469 Q22.1563,41.0469 22.75,40.7813 Q23.3438,40.5 23.9688,39.9219 L23.9688,42.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="35" y="41.1543">UpdateAvatarUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="177" y1="53" y2="53"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="61"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="26" y="67.2104">users: UserRepository</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="73.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="26" y="80.0151">images: MediaRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="177" y1="86.6094" y2="86.6094"/><ellipse cx="17" cy="97.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="26" y="100.8198">upload_avatar(image)</text><ellipse cx="17" cy="110.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="26" y="113.6245">delete_avatar()</text><!--MD5=[b50600dfb8dd2e0e1fc2b58f4ebea7a4]
class MediaRepository--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="60.8047" id="MediaRepository" style="stroke: #A80036; stroke-width: 1.5;" width="183" x="37.5" y="205.5"/><ellipse cx="74.1" cy="221.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M70.0219,217.2656 L70.0219,215.1094 L77.4125,215.1094 L77.4125,217.2656 L74.9438,217.2656 L74.9438,225.3438 L77.4125,225.3438 L77.4125,227.5 L70.0219,227.5 L70.0219,225.3438 L72.4906,225.3438 L72.4906,217.2656 L70.0219,217.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="103" x="92.9" y="225.6543">MediaRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="38.5" x2="219.5" y1="237.5" y2="237.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="38.5" x2="219.5" y1="245.5" y2="245.5"/><ellipse cx="48.5" cy="256.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="157" x="57.5" y="259.7104">upload_image(image): UUID</text><!--MD5=[3fd616f346a44cd59a91eb10b19e157c]
class User--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="150.4375" id="User" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="940.5" y="498"/><ellipse cx="1009.25" cy="514" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1012.2188,519.6406 Q1011.6406,519.9375 1011,520.0781 Q1010.3594,520.2344 1009.6563,520.2344 Q1007.1563,520.2344 1005.8281,518.5938 Q1004.5156,516.9375 1004.5156,513.8125 Q1004.5156,510.6875 1005.8281,509.0313 Q1007.1563,507.375 1009.6563,507.375 Q1010.3594,507.375 1011,507.5313 Q1011.6563,507.6875 1012.2188,507.9844 L1012.2188,510.7031 Q1011.5938,510.125 1011,509.8594 Q1010.4063,509.5781 1009.7813,509.5781 Q1008.4375,509.5781 1007.75,510.6563 Q1007.0625,511.7188 1007.0625,513.8125 Q1007.0625,515.9063 1007.75,516.9844 Q1008.4375,518.0469 1009.7813,518.0469 Q1010.4063,518.0469 1011,517.7813 Q1011.5938,517.5 1012.2188,516.9219 L1012.2188,519.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="29" x="1029.75" y="518.1543">User</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="941.5" x2="1114.5" y1="530" y2="530"/><ellipse cx="951.5" cy="541" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="960.5" y="544.2104">id: UUID</text><ellipse cx="951.5" cy="553.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="960.5" y="557.0151">email: EmailStr</text><ellipse cx="951.5" cy="566.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="960.5" y="569.8198">status: UserStatus</text><ellipse cx="951.5" cy="579.4141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="960.5" y="582.6245">password: PasswordHash</text><ellipse cx="951.5" cy="592.2188" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="960.5" y="595.4292">first_name: str</text><ellipse cx="951.5" cy="605.0234" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="960.5" y="608.2339">last_name: str</text><ellipse cx="951.5" cy="617.8281" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="41" x="960.5" y="621.0386">bio: str</text><ellipse cx="951.5" cy="630.6328" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="960.5" y="633.8433">photo: Media?</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="941.5" x2="1114.5" y1="640.4375" y2="640.4375"/><!--MD5=[51fd3fce36c976f35b405d5800336138]
class UserStatus--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="73.6094" id="UserStatus" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="977" y="708"/><ellipse cx="992" cy="724" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M996.1094,730 L988.3906,730 L988.3906,717.6094 L996.1094,717.6094 L996.1094,719.7656 L990.8438,719.7656 L990.8438,722.4375 L995.6094,722.4375 L995.6094,724.5938 L990.8438,724.5938 L990.8438,727.8438 L996.1094,727.8438 L996.1094,730 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="1006" y="728.1543">UserStatus</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="978" x2="1078" y1="740" y2="740"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="983" y="754.2104">CREATED</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="983" y="767.0151">VERIFIED</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="978" x2="1078" y1="773.6094" y2="773.6094"/><!--MD5=[9d93cc8568a88ed605ddd50c0dd874e2]
class Media--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="60.8047" id="Media" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="507.5" y="714.5"/><ellipse cx="522.5" cy="730.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M525.4688,736.1406 Q524.8906,736.4375 524.25,736.5781 Q523.6094,736.7344 522.9063,736.7344 Q520.4063,736.7344 519.0781,735.0938 Q517.7656,733.4375 517.7656,730.3125 Q517.7656,727.1875 519.0781,725.5313 Q520.4063,723.875 522.9063,723.875 Q523.6094,723.875 524.25,724.0313 Q524.9063,724.1875 525.4688,724.4844 L525.4688,727.2031 Q524.8438,726.625 524.25,726.3594 Q523.6563,726.0781 523.0313,726.0781 Q521.6875,726.0781 521,727.1563 Q520.3125,728.2188 520.3125,730.3125 Q520.3125,732.4063 521,733.4844 Q521.6875,734.5469 523.0313,734.5469 Q523.6563,734.5469 524.25,734.2813 Q524.8438,734 525.4688,733.4219 L525.4688,736.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="37" x="536.5" y="734.6543">Media</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="508.5" x2="575.5" y1="746.5" y2="746.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="513.5" y="760.7104">id: UUID</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="508.5" x2="575.5" y1="767.3047" y2="767.3047"/><!--MD5=[4e0cb3a35dd1c1245f8d628acd95dc8e]
class PostgresUserRepoImpl--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="60.8047" id="PostgresUserRepoImpl" style="stroke: #A80036; stroke-width: 1.5;" width="174" x="423" y="358"/><ellipse cx="438" cy="374" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M440.9688,379.6406 Q440.3906,379.9375 439.75,380.0781 Q439.1094,380.2344 438.4063,380.2344 Q435.9063,380.2344 434.5781,378.5938 Q433.2656,376.9375 433.2656,373.8125 Q433.2656,370.6875 434.5781,369.0313 Q435.9063,367.375 438.4063,367.375 Q439.1094,367.375 439.75,367.5313 Q440.4063,367.6875 440.9688,367.9844 L440.9688,370.7031 Q440.3438,370.125 439.75,369.8594 Q439.1563,369.5781 438.5313,369.5781 Q437.1875,369.5781 436.5,370.6563 Q435.8125,371.7188 435.8125,373.8125 Q435.8125,375.9063 436.5,376.9844 Q437.1875,378.0469 438.5313,378.0469 Q439.1563,378.0469 439.75,377.7813 Q440.3438,377.5 440.9688,376.9219 L440.9688,379.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="142" x="452" y="378.1543">PostgresUserRepoImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="424" x2="596" y1="390" y2="390"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="431" y="398"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="443" y="404.2104">db: PostgresConnection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="424" x2="596" y1="410.8047" y2="410.8047"/><!--MD5=[b3698407ef457bb1644431ba4b390d9f]
class MinioMediaRepoImpl--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="60.8047" id="MinioMediaRepoImpl" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="182" y="358"/><ellipse cx="197" cy="374" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M199.9688,379.6406 Q199.3906,379.9375 198.75,380.0781 Q198.1094,380.2344 197.4063,380.2344 Q194.9063,380.2344 193.5781,378.5938 Q192.2656,376.9375 192.2656,373.8125 Q192.2656,370.6875 193.5781,369.0313 Q194.9063,367.375 197.4063,367.375 Q198.1094,367.375 198.75,367.5313 Q199.4063,367.6875 199.9688,367.9844 L199.9688,370.7031 Q199.3438,370.125 198.75,369.8594 Q198.1563,369.5781 197.5313,369.5781 Q196.1875,369.5781 195.5,370.6563 Q194.8125,371.7188 194.8125,373.8125 Q194.8125,375.9063 195.5,376.9844 Q196.1875,378.0469 197.5313,378.0469 Q198.1563,378.0469 198.75,377.7813 Q199.3438,377.5 199.9688,376.9219 L199.9688,379.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="126" x="211" y="378.1543">MinioMediaRepoImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="183" x2="339" y1="390" y2="390"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="188" y="404.2104">credentials: str</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="183" x2="339" y1="410.8047" y2="410.8047"/><!--MD5=[0d3d67a6ef04163560c9e2439e3d19cf]
class NotificationsService--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="60.8047" id="NotificationsService" style="stroke: #A80036; stroke-width: 1.5;" width="172" x="661" y="205.5"/><ellipse cx="684.1" cy="221.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M680.0219,217.2656 L680.0219,215.1094 L687.4125,215.1094 L687.4125,217.2656 L684.9438,217.2656 L684.9438,225.3438 L687.4125,225.3438 L687.4125,227.5 L680.0219,227.5 L680.0219,225.3438 L682.4906,225.3438 L682.4906,217.2656 L680.0219,217.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="122" x="699.9" y="225.6543">NotificationsService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="662" x2="832" y1="237.5" y2="237.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="662" x2="832" y1="245.5" y2="245.5"/><ellipse cx="672" cy="256.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="146" x="681" y="259.7104">send_verification(user_id)</text><!--MD5=[3b67181cff55c44d048f4f121abee1a0]
class Friendship--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="99.2188" id="Friendship" style="stroke: #A80036; stroke-width: 1.5;" width="159" x="948.5" y="339"/><ellipse cx="991.4" cy="355" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M994.3688,360.6406 Q993.7906,360.9375 993.15,361.0781 Q992.5094,361.2344 991.8063,361.2344 Q989.3063,361.2344 987.9781,359.5938 Q986.6656,357.9375 986.6656,354.8125 Q986.6656,351.6875 987.9781,350.0313 Q989.3063,348.375 991.8063,348.375 Q992.5094,348.375 993.15,348.5313 Q993.8063,348.6875 994.3688,348.9844 L994.3688,351.7031 Q993.7438,351.125 993.15,350.8594 Q992.5563,350.5781 991.9313,350.5781 Q990.5875,350.5781 989.9,351.6563 Q989.2125,352.7188 989.2125,354.8125 Q989.2125,356.9063 989.9,357.9844 Q990.5875,359.0469 991.9313,359.0469 Q992.5563,359.0469 993.15,358.7813 Q993.7438,358.5 994.3688,357.9219 L994.3688,360.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="65" x="1011.6" y="359.1543">Friendship</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="949.5" x2="1106.5" y1="371" y2="371"/><ellipse cx="959.5" cy="382" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="968.5" y="385.2104">user1: User</text><ellipse cx="959.5" cy="394.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="968.5" y="398.0151">user2: User</text><ellipse cx="959.5" cy="407.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="968.5" y="410.8198">initiator: User</text><ellipse cx="959.5" cy="420.4141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="968.5" y="423.6245">status: FriendshipState</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="949.5" x2="1106.5" y1="430.2188" y2="430.2188"/><!--MD5=[e63b9211106c992dfeff555517db0690]
class FriendshipState--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="86.4141" id="FriendshipState" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="774.5" y="530"/><ellipse cx="789.5" cy="546" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M793.6094,552 L785.8906,552 L785.8906,539.6094 L793.6094,539.6094 L793.6094,541.7656 L788.3438,541.7656 L788.3438,544.4375 L793.1094,544.4375 L793.1094,546.5938 L788.3438,546.5938 L788.3438,549.8438 L793.6094,549.8438 L793.6094,552 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="99" x="803.5" y="550.1543">FriendshipState</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="775.5" x2="904.5" y1="562" y2="562"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="780.5" y="576.2104">PENDING</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="780.5" y="589.0151">ACCEPTED</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="54" x="780.5" y="601.8198">REJECTED</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="775.5" x2="904.5" y1="608.4141" y2="608.4141"/><!--MD5=[6cdfd470e1bbf55dbabe19064434c1fb]
class FriendshipRepository--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="73.6094" id="FriendshipRepository" style="stroke: #A80036; stroke-width: 1.5;" width="262" x="891" y="199"/><ellipse cx="952.75" cy="215" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M948.6719,210.7656 L948.6719,208.6094 L956.0625,208.6094 L956.0625,210.7656 L953.5938,210.7656 L953.5938,218.8438 L956.0625,218.8438 L956.0625,221 L948.6719,221 L948.6719,218.8438 L951.1406,218.8438 L951.1406,210.7656 L948.6719,210.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="130" x="973.25" y="219.1543">FriendshipRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="892" x2="1152" y1="231" y2="231"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="892" x2="1152" y1="239" y2="239"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="250" x="897" y="253.2104">find_request(u1:User, u2:User): Friendship?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="897" y="266.0151">save(link: Friendship)</text><!--MD5=[523dbd4e3789ae37f725fb38854f0b02]
class PostgresFriendshipRepoImpl--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="60.8047" id="PostgresFriendshipRepoImpl" style="stroke: #A80036; stroke-width: 1.5;" width="210" x="703" y="358"/><ellipse cx="718" cy="374" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M720.9688,379.6406 Q720.3906,379.9375 719.75,380.0781 Q719.1094,380.2344 718.4063,380.2344 Q715.9063,380.2344 714.5781,378.5938 Q713.2656,376.9375 713.2656,373.8125 Q713.2656,370.6875 714.5781,369.0313 Q715.9063,367.375 718.4063,367.375 Q719.1094,367.375 719.75,367.5313 Q720.4063,367.6875 720.9688,367.9844 L720.9688,370.7031 Q720.3438,370.125 719.75,369.8594 Q719.1563,369.5781 718.5313,369.5781 Q717.1875,369.5781 716.5,370.6563 Q715.8125,371.7188 715.8125,373.8125 Q715.8125,375.9063 716.5,376.9844 Q717.1875,378.0469 718.5313,378.0469 Q719.1563,378.0469 719.75,377.7813 Q720.3438,377.5 720.9688,376.9219 L720.9688,379.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="178" x="732" y="378.1543">PostgresFriendshipRepoImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="704" x2="912" y1="390" y2="390"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="711" y="398"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="723" y="404.2104">db: PostgresConnection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="704" x2="912" y1="410.8047" y2="410.8047"/><!--MD5=[0419ab1581269a7645cb09f0695b272b]
class GetFriendsUsecase--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="73.6094" id="GetFriendsUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="206" x="1113" y="33.5"/><ellipse cx="1151.4" cy="49.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1154.3688,55.1406 Q1153.7906,55.4375 1153.15,55.5781 Q1152.5094,55.7344 1151.8063,55.7344 Q1149.3063,55.7344 1147.9781,54.0938 Q1146.6656,52.4375 1146.6656,49.3125 Q1146.6656,46.1875 1147.9781,44.5313 Q1149.3063,42.875 1151.8063,42.875 Q1152.5094,42.875 1153.15,43.0313 Q1153.8063,43.1875 1154.3688,43.4844 L1154.3688,46.2031 Q1153.7438,45.625 1153.15,45.3594 Q1152.5563,45.0781 1151.9313,45.0781 Q1150.5875,45.0781 1149.9,46.1563 Q1149.2125,47.2188 1149.2125,49.3125 Q1149.2125,51.4063 1149.9,52.4844 Q1150.5875,53.5469 1151.9313,53.5469 Q1152.5563,53.5469 1153.15,53.2813 Q1153.7438,53 1154.3688,52.4219 L1154.3688,55.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="122" x="1170.6" y="53.6543">GetFriendsUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1114" x2="1318" y1="65.5" y2="65.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1121" y="73.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="1133" y="79.7104">friends: FriendshipRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1114" x2="1318" y1="86.3047" y2="86.3047"/><ellipse cx="1124" cy="97.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="180" x="1133" y="100.5151">list(friends_of: UUID): List[UUID]</text><!--MD5=[3b636ee9afbb1c3bdd0c4f37f67f4233]
class FriendRequestUsecase--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="124.8281" id="FriendRequestUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="218" x="860" y="8"/><ellipse cx="893.45" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M896.4188,29.6406 Q895.8406,29.9375 895.2,30.0781 Q894.5594,30.2344 893.8563,30.2344 Q891.3563,30.2344 890.0281,28.5938 Q888.7156,26.9375 888.7156,23.8125 Q888.7156,20.6875 890.0281,19.0313 Q891.3563,17.375 893.8563,17.375 Q894.5594,17.375 895.2,17.5313 Q895.8563,17.6875 896.4188,17.9844 L896.4188,20.7031 Q895.7938,20.125 895.2,19.8594 Q894.6063,19.5781 893.9813,19.5781 Q892.6375,19.5781 891.95,20.6563 Q891.2625,21.7188 891.2625,23.8125 Q891.2625,25.9063 891.95,26.9844 Q892.6375,28.0469 893.9813,28.0469 Q894.6063,28.0469 895.2,27.7813 Q895.7938,27.5 896.4188,26.9219 L896.4188,29.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="145" x="911.55" y="28.1543">FriendRequestUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="861" x2="1077" y1="40" y2="40"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="868" y="48"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="880" y="54.2104">friends: FriendshipRepository</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="868" y="60.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="880" y="67.0151">users: UserRepository</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="868" y="73.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="880" y="79.8198">notifications: NotificationsService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="861" x2="1077" y1="86.4141" y2="86.4141"/><ellipse cx="871" cy="97.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="192" x="880" y="100.6245">accept(from: UUID, to: UUID): void</text><ellipse cx="871" cy="110.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="183" x="880" y="113.4292">send(from: UUID, to: UUID): void</text><ellipse cx="871" cy="123.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="880" y="126.2339">reject(from: UUID, to: UUID): void</text><!--MD5=[0a8a9a553ad28d76d3a1fd3918a25a86]
class Rating--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="86.4141" id="Rating" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="1252" y="345.5"/><ellipse cx="1267.9" cy="361.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1270.8688,367.1406 Q1270.2906,367.4375 1269.65,367.5781 Q1269.0094,367.7344 1268.3063,367.7344 Q1265.8063,367.7344 1264.4781,366.0938 Q1263.1656,364.4375 1263.1656,361.3125 Q1263.1656,358.1875 1264.4781,356.5313 Q1265.8063,354.875 1268.3063,354.875 Q1269.0094,354.875 1269.65,355.0313 Q1270.3063,355.1875 1270.8688,355.4844 L1270.8688,358.2031 Q1270.2438,357.625 1269.65,357.3594 Q1269.0563,357.0781 1268.4313,357.0781 Q1267.0875,357.0781 1266.4,358.1563 Q1265.7125,359.2188 1265.7125,361.3125 Q1265.7125,363.4063 1266.4,364.4844 Q1267.0875,365.5469 1268.4313,365.5469 Q1269.0563,365.5469 1269.65,365.2813 Q1270.2438,365 1270.8688,364.4219 L1270.8688,367.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="40" x="1282.1" y="365.6543">Rating</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1253" x2="1325" y1="377.5" y2="377.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="1258" y="391.7104">from: User</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="46" x="1258" y="404.5151">to: User</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="1258" y="417.3198">value: int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1253" x2="1325" y1="423.9141" y2="423.9141"/><!--MD5=[baa0b6c6124de993ef56355f49171694]
class RatingRepository--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="86.4141" id="RatingRepository" style="stroke: #A80036; stroke-width: 1.5;" width="217" x="1289.5" y="193"/><ellipse cx="1340.75" cy="209" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1336.6719,204.7656 L1336.6719,202.6094 L1344.0625,202.6094 L1344.0625,204.7656 L1341.5938,204.7656 L1341.5938,212.8438 L1344.0625,212.8438 L1344.0625,215 L1336.6719,215 L1336.6719,212.8438 L1339.1406,212.8438 L1339.1406,204.7656 L1336.6719,204.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="106" x="1361.25" y="213.1543">RatingRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1290.5" x2="1505.5" y1="225" y2="225"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1290.5" x2="1505.5" y1="233" y2="233"/><ellipse cx="1300.5" cy="244" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="191" x="1309.5" y="247.2104">get(from: UUID, to: UUID): Rating?</text><ellipse cx="1300.5" cy="256.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="1309.5" y="260.0151">save(rating): Rating</text><ellipse cx="1300.5" cy="269.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="1309.5" y="272.8198">compute(of: UUID): float?</text><!--MD5=[a8345556ef49c770a74f7526127eac91]
class RatingsUsecase--><rect fill="#FEFECE" filter="url(#fat914qxa5xmu)" height="86.4141" id="RatingsUsecase" style="stroke: #A80036; stroke-width: 1.5;" width="280" x="1354" y="27.5"/><ellipse cx="1439.25" cy="43.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1442.2188,49.1406 Q1441.6406,49.4375 1441,49.5781 Q1440.3594,49.7344 1439.6563,49.7344 Q1437.1563,49.7344 1435.8281,48.0938 Q1434.5156,46.4375 1434.5156,43.3125 Q1434.5156,40.1875 1435.8281,38.5313 Q1437.1563,36.875 1439.6563,36.875 Q1440.3594,36.875 1441,37.0313 Q1441.6563,37.1875 1442.2188,37.4844 L1442.2188,40.2031 Q1441.5938,39.625 1441,39.3594 Q1440.4063,39.0781 1439.7813,39.0781 Q1438.4375,39.0781 1437.75,40.1563 Q1437.0625,41.2188 1437.0625,43.3125 Q1437.0625,45.4063 1437.75,46.4844 Q1438.4375,47.5469 1439.7813,47.5469 Q1440.4063,47.5469 1441,47.2813 Q1441.5938,47 1442.2188,46.4219 L1442.2188,49.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="101" x="1459.75" y="47.6543">RatingsUsecase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1355" x2="1633" y1="59.5" y2="59.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1362" y="67.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="1374" y="73.7104">ratings: RatingRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1355" x2="1633" y1="80.3047" y2="80.3047"/><ellipse cx="1365" cy="91.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="254" x="1374" y="94.5151">update(from: UUID, to: UUID, value: int): void</text><ellipse cx="1365" cy="104.1094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="1374" y="107.3198">get_value(user: UUID): float?</text><!--MD5=[4b8c278432ef96c74d8b249bf3febe7b]
link RegisterUserUsecase to UserRepository--><path d="M692.45,107.58 C659.86,131.8 616.68,163.89 581.81,189.81 " fill="none" id="RegisterUserUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="577.6,192.94,587.2087,190.7784,581.612,189.956,582.4343,184.3593,577.6,192.94" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4f2dab73436ed5fec1bfe8a8667c44c1]
link GetUserUsecase to UserRepository--><path d="M521,107.79 C521,131.34 521,162.26 521,187.73 " fill="none" id="GetUserUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="521,192.75,525,183.75,521,187.75,517,183.75,521,192.75" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[001e43dab09f39a011f2efbd4d80c76d]
link UpdateProfileUsecase to UserRepository--><path d="M347.99,107.58 C380.88,131.8 424.45,163.89 459.64,189.81 " fill="none" id="UpdateProfileUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="463.89,192.94,459.0163,184.3816,459.8644,189.9745,454.2714,190.8226,463.89,192.94" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[494d444a6b75cdd5db5ae73d27579f28]
link UpdateAvatarUsecase to UserRepository--><path d="M169.92,120.14 C178.57,124.77 187.38,129.16 196,133 C270.76,166.3 359.67,193.41 425.58,211.28 " fill="none" id="UpdateAvatarUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="430.69,212.66,423.0565,206.4367,425.8655,211.3468,420.9554,214.1559,430.69,212.66" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8661c1cc068a72c9331281a705d387f6]
link UpdateAvatarUsecase to MediaRepository--><path d="M103,120.11 C108.82,145.84 115.84,176.84 121.11,200.15 " fill="none" id="UpdateAvatarUsecase-&gt;MediaRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="122.28,205.3,124.1994,195.64,121.1787,200.4228,116.3959,197.4021,122.28,205.3" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[bb813e58dcb6d929d30ff5a4a5d12263]
reverse link User to Media--><path d="M928.69,645.29 C926.79,646.22 924.9,647.13 923,648 C802.42,703.35 645.14,730.01 576.52,739.62 " fill="none" id="User&lt;-Media" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="940.3,639.17,933.1277,638.4233,929.6798,644.7568,936.8522,645.5034,940.3,639.17" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[bf2fdfe05571cb59ff2fe6a1a06cc23c]
reverse link User to UserStatus--><path d="M1028,661.28 C1028,677.77 1028,694.15 1028,707.93 " fill="none" id="User&lt;-UserStatus" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1028,648.07,1024,654.07,1028,660.07,1032,654.07,1028,648.07" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[70653a2b8f9805ba601a3bf0c9ed9be5]
reverse link UserRepository to User--><path d="M570.35,288.76 C584.81,304.55 600.39,322.19 614,339 C648.08,381.08 640.24,407.53 685,438 C775.17,499.4 823.86,452.48 923,498 C928.78,500.65 934.57,503.63 940.3,506.83 " fill="none" id="UserRepository&lt;-User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="561.52,279.19,562.6474,286.3124,569.6555,288.0112,568.5282,280.8887,561.52,279.19" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[26c5245289d516ed542d2899a122cdd0]
reverse link UserRepository to PostgresUserRepoImpl--><path d="M516.44,299.33 C514.96,319.59 513.39,341.15 512.17,357.88 " fill="none" id="UserRepository&lt;-PostgresUserRepoImpl" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="509.47,298.76,517.91,279.32,523.43,299.78,509.47,298.76" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[85469d579ea478cae1c05ebed7375266]
reverse link MediaRepository to Media--><path d="M127.96,279.85 C128.78,322.7 135.25,389.09 164,438 C249.35,583.22 431.23,687.94 507.36,727.08 " fill="none" id="MediaRepository&lt;-Media" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="127.87,266.82,123.9096,272.8462,127.9491,278.8197,131.9095,272.7935,127.87,266.82" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[22586ff5f87c37ec0898f065d9c1de38]
reverse link MediaRepository to MinioMediaRepoImpl--><path d="M168.45,281.98 C189.97,306.51 216.01,336.2 234.98,357.83 " fill="none" id="MediaRepository&lt;-MinioMediaRepoImpl" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="163,286.39,155.08,266.73,173.53,277.15,163,286.39" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b54a3f9d603b3bf6dde7dee46194db01]
link RegisterUserUsecase to NotificationsService--><path d="M742.33,107.79 C743.34,135.3 744.72,172.9 745.72,200.08 " fill="none" id="RegisterUserUsecase-&gt;NotificationsService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="745.91,205.37,749.5732,196.2277,745.7244,200.3734,741.5787,196.5247,745.91,205.37" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[0b93ce3a17968920a9643cf885986b25]
reverse link Friendship to FriendshipState--><path d="M968.1,447.64 C940.61,474.33 908.62,505.38 883.49,529.78 " fill="none" id="Friendship&lt;-FriendshipState" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="977.62,438.41,970.5288,439.7197,969.0104,446.7691,976.1016,445.4594,977.62,438.41" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[6e59cc6eb94ffb2325a27bfd6ddcd767]
reverse link Friendship to User--><path d="M1028,451.68 C1028,466.54 1028,482.54 1028,497.88 " fill="none" id="Friendship&lt;-User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1028,438.41,1024,444.41,1028,450.41,1032,444.41,1028,438.41" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1019.6188" y="487.0577">3</text><!--MD5=[9278a4db87134efe22e65567c6d1c4ad]
reverse link FriendshipRepository to Friendship--><path d="M1023.96,286.13 C1024.63,303.08 1025.39,322.04 1026.06,338.94 " fill="none" id="FriendshipRepository&lt;-Friendship" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1023.44,273.05,1019.6806,279.2036,1023.9149,285.0406,1027.6743,278.887,1023.44,273.05" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[59d3a531ac47398acd15a22f8ef4d1ed]
reverse link FriendshipRepository to PostgresFriendshipRepoImpl--><path d="M954.08,284.77 C920.01,308.73 879.81,337 850.21,357.81 " fill="none" id="FriendshipRepository&lt;-PostgresFriendshipRepoImpl" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="950.36,278.83,970.74,273.05,958.41,290.28,950.36,278.83" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[3406471606f8843b6e9c1a52300f4c39]
link GetFriendsUsecase to FriendshipRepository--><path d="M1172.95,107.79 C1142.18,133.72 1100.79,168.6 1069.14,195.27 " fill="none" id="GetFriendsUsecase-&gt;FriendshipRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1064.93,198.82,1074.3838,196.0585,1068.7464,195.5896,1069.2152,189.9523,1064.93,198.82" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[914926d311a2ca9550e2a6621a7d93db]
link FriendRequestUsecase to NotificationsService--><path d="M885.39,133.08 C853.42,156.62 818.22,182.55 791.32,202.36 " fill="none" id="FriendRequestUsecase-&gt;NotificationsService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="787.08,205.48,796.7021,203.3789,791.1107,202.5213,791.9682,196.9299,787.08,205.48" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[69fc47a81207c237ec188d724843a255]
link FriendRequestUsecase to FriendshipRepository--><path d="M989.04,133.31 C995.57,153.48 1002.67,175.37 1008.6,193.66 " fill="none" id="FriendRequestUsecase-&gt;FriendshipRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1010.24,198.72,1011.2683,188.925,1008.6975,193.9639,1003.6586,191.393,1010.24,198.72" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[2cf7c2302ec48e39cf53c4e9dd09deba]
link FriendRequestUsecase to UserRepository--><path d="M859.68,125.77 C853.74,128.3 847.82,130.73 842,133 C755.94,166.57 730.91,164.63 643,193 C634.2,195.84 625.06,198.86 615.92,201.92 " fill="none" id="FriendRequestUsecase-&gt;UserRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="611.14,203.53,620.9448,204.4609,615.8805,201.9403,618.4012,196.8761,611.14,203.53" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[7df1310d9f5b50d284c38b4b9283908e]
link Rating to User--><path d="M1251.88,415.45 C1217.66,439.38 1165.45,475.89 1120.05,507.63 " fill="none" id="Rating-&gt;User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1115.68,510.69,1125.3509,508.8261,1119.7822,507.8313,1120.777,502.2626,1115.68,510.69" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1123.5588" y="501.7445">2</text><!--MD5=[be7a7871b40b052ef0f195f85c6ac0dc]
reverse link RatingRepository to Rating--><path d="M1359.57,290.06 C1346.41,308.24 1331.87,328.31 1319.42,345.49 " fill="none" id="RatingRepository&lt;-Rating" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1367.35,279.32,1360.5905,281.8317,1360.3092,289.0374,1367.0687,286.5256,1367.35,279.32" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[67c2091cc910f71dec9d812cfa60579c]
link RatingsUsecase to RatingRepository--><path d="M1469.28,113.61 C1455.84,136.5 1439.18,164.86 1425.35,188.41 " fill="none" id="RatingsUsecase-&gt;RatingRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1422.81,192.75,1430.8118,187.0079,1425.3382,188.4363,1423.9099,182.9627,1422.81,192.75" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c1b2d70378f286e758b6853d104f6111]
@startuml classes

class RegisterUserUsecase {
    - users: UserRepository
    + create_user(data)
}
RegisterUserUsecase - -> UserRepository


class GetUserUsecase {
    - users: UserRepository
    + get_user(user_id: UUID): User?
}
GetUserUsecase - -> UserRepository

class UpdateProfileUsecase {
    - users: UserRepository
    + update(user_data): void
}
UpdateProfileUsecase - -> UserRepository


class UpdateAvatarUsecase {
    - users: UserRepository
    - images: MediaRepository
    + upload_avatar(image)
    + delete_avatar()
}
UpdateAvatarUsecase - -> UserRepository
UpdateAvatarUsecase - -> MediaRepository


class User {
    + id: UUID
    + email: EmailStr
    + status: UserStatus
    + password: PasswordHash
    + first_name: str
    + last_name: str
    + bio: str
    + photo: Media?
}

enum UserStatus {
    CREATED
    VERIFIED
}

User *- - Media

User *- - UserStatus

class Media {
    id: UUID
}

interface UserRepository {
    + get(id:UUID): User?
    + get_by_email(email): User?
    + save(user): User
}


UserRepository o- - User

class PostgresUserRepoImpl {
    - db: PostgresConnection
}

PostgresUserRepoImpl -u-|> UserRepository

interface MediaRepository {
    + upload_image(image): UUID
}

MediaRepository o- - Media

class MinioMediaRepoImpl {
    credentials: str
}

MinioMediaRepoImpl -u-|> MediaRepository

RegisterUserUsecase - -> NotificationsService

interface NotificationsService {
    + send_verification(user_id)
}

class Friendship {
    + user1: User
    + user2: User
    + initiator: User
    + status: FriendshipState
}



enum FriendshipState {
    PENDING
    ACCEPTED
    REJECTED
}

Friendship *- - FriendshipState

Friendship o- - "3" User

interface FriendshipRepository {
    find_request(u1:User, u2:User): Friendship?
    save(link: Friendship)
}

FriendshipRepository o- - Friendship

class PostgresFriendshipRepoImpl {
    - db: PostgresConnection
}

PostgresFriendshipRepoImpl -up-|> FriendshipRepository

class GetFriendsUsecase {
    - friends: FriendshipRepository

    + list(friends_of: UUID): List[UUID]
}

GetFriendsUsecase - -> FriendshipRepository

class FriendRequestUsecase {
    - friends: FriendshipRepository
    - users: UserRepository
    - notifications: NotificationsService

    + accept(from: UUID, to: UUID): void
    + send(from: UUID, to: UUID): void
    + reject(from: UUID, to: UUID): void
}


FriendRequestUsecase - -> NotificationsService
FriendRequestUsecase - -> FriendshipRepository
FriendRequestUsecase - -> UserRepository

class Rating {
    from: User
    to: User
    value: int
}

Rating - -> "2" User

interface RatingRepository {
    + get(from: UUID, to: UUID): Rating?
    + save(rating): Rating
    + compute(of: UUID): float?
}

RatingRepository o- - Rating

class RatingsUsecase {
    - ratings: RatingRepository

    + update(from: UUID, to: UUID, value: int): void
    + get_value(user: UUID): float?
}

RatingsUsecase - -> RatingRepository

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.9+11-Ubuntu-0ubuntu1
Operating System: Linux
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>