<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="396px" preserveAspectRatio="none" style="width:697px;height:396px;" version="1.1" viewBox="0 0 697 396" width="697px" zoomAndPan="magnify"><defs><filter height="300%" id="f1rg61gaxinq8y" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1rg61gaxinq8y)" height="182.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="113" y="117.4297"/><rect fill="#FFFFFF" filter="url(#f1rg61gaxinq8y)" height="115.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="234.5" y="146.5625"/><rect fill="#FFFFFF" filter="url(#f1rg61gaxinq8y)" height="72.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="408" y="175.6953"/><rect fill="#FFFFFF" filter="url(#f1rg61gaxinq8y)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="652" y="204.8281"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="27" x2="27" y1="86.2969" y2="309.0938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="117.5" x2="117.5" y1="86.2969" y2="309.0938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="239.5" x2="239.5" y1="86.2969" y2="309.0938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="412.5" x2="412.5" y1="86.2969" y2="309.0938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="657" x2="657" y1="86.2969" y2="309.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="82.9951">User</text><ellipse cx="27" cy="13" fill="#FEFECE" filter="url(#f1rg61gaxinq8y)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,21 L27,48 M14,29 L40,29 M27,48 L14,63 M27,48 L40,63 " fill="none" filter="url(#f1rg61gaxinq8y)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="321.0889">User</text><ellipse cx="27" cy="334.3906" fill="#FEFECE" filter="url(#f1rg61gaxinq8y)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,342.3906 L27,369.3906 M14,350.3906 L40,350.3906 M27,369.3906 L14,384.3906 M27,369.3906 L40,384.3906 " fill="none" filter="url(#f1rg61gaxinq8y)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1rg61gaxinq8y)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="71.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="78.5" y="70.9951">WebServer</text><rect fill="#FEFECE" filter="url(#f1rg61gaxinq8y)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="71.5" y="308.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="78.5" y="328.0889">WebServer</text><rect fill="#FEFECE" filter="url(#f1rg61gaxinq8y)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="174.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="181.5" y="70.9951">RatingsUsecase</text><rect fill="#FEFECE" filter="url(#f1rg61gaxinq8y)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="174.5" y="308.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="181.5" y="328.0889">RatingsUsecase</text><rect fill="#FEFECE" filter="url(#f1rg61gaxinq8y)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="314.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="179" x="321.5" y="70.9951">PostgresRatingsRepoImpl</text><rect fill="#FEFECE" filter="url(#f1rg61gaxinq8y)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="314.5" y="308.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="179" x="321.5" y="328.0889">PostgresRatingsRepoImpl</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="623" y="82.9951">Postgres</text><path d="M639,34 C639,24 657,24 657,24 C657,24 675,24 675,34 L675,60 C675,70 657,70 657,70 C657,70 639,70 639,60 L639,34 " fill="#FEFECE" filter="url(#f1rg61gaxinq8y)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M639,34 C639,44 657,44 657,44 C657,44 675,44 675,34 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="623" y="321.0889">Postgres</text><path d="M639,334.3906 C639,324.3906 657,324.3906 657,324.3906 C657,324.3906 675,324.3906 675,334.3906 L675,360.3906 C675,370.3906 657,370.3906 657,370.3906 C657,370.3906 639,370.3906 639,360.3906 L639,334.3906 " fill="#FEFECE" filter="url(#f1rg61gaxinq8y)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M639,334.3906 C639,344.3906 657,344.3906 657,344.3906 C657,344.3906 675,344.3906 675,334.3906 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f1rg61gaxinq8y)" height="182.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="113" y="117.4297"/><rect fill="#FFFFFF" filter="url(#f1rg61gaxinq8y)" height="115.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="234.5" y="146.5625"/><rect fill="#FFFFFF" filter="url(#f1rg61gaxinq8y)" height="72.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="408" y="175.6953"/><rect fill="#FFFFFF" filter="url(#f1rg61gaxinq8y)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="652" y="204.8281"/><polygon fill="#A80036" points="101,113.4297,111,117.4297,101,121.4297,105,117.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="107" y1="117.4297" y2="117.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="34" y="112.3638">POST data</text><polygon fill="#A80036" points="222.5,142.5625,232.5,146.5625,222.5,150.5625,226.5,146.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="123" x2="228.5" y1="146.5625" y2="146.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="130" y="141.4966">update()</text><polygon fill="#A80036" points="396,171.6953,406,175.6953,396,179.6953,400,175.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="244.5" x2="402" y1="175.6953" y2="175.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="251.5" y="170.6294">save()</text><polygon fill="#A80036" points="640,200.8281,650,204.8281,640,208.8281,644,204.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="418" x2="646" y1="204.8281" y2="204.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="425" y="199.7622">INSERT ON CONFLICT DO UPDATE</text><polygon fill="#A80036" points="429,229.9609,419,233.9609,429,237.9609,425,233.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="423" x2="656" y1="233.9609" y2="233.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="435" y="228.895">OK 1 row affected</text><polygon fill="#A80036" points="255.5,243.9609,245.5,247.9609,255.5,251.9609,251.5,247.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249.5" x2="412" y1="247.9609" y2="247.9609"/><polygon fill="#A80036" points="134,257.9609,124,261.9609,134,265.9609,130,261.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="128" x2="238.5" y1="261.9609" y2="261.9609"/><polygon fill="#A80036" points="38,287.0938,28,291.0938,38,295.0938,34,291.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="112" y1="291.0938" y2="291.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="44" y="286.0278">200 OK</text><!--MD5=[7b57797cb545820eaae1b1f638db3091]
@startuml ratings_sequence

actor User

participant WebServer
participant RatingsUsecase
participant PostgresRatingsRepoImpl
database Postgres


User -> WebServer : POST data
activate WebServer

WebServer -> RatingsUsecase: update()
activate RatingsUsecase

RatingsUsecase -> PostgresRatingsRepoImpl: save()
activate PostgresRatingsRepoImpl

PostgresRatingsRepoImpl -> Postgres: INSERT ON CONFLICT DO UPDATE
activate Postgres

PostgresRatingsRepoImpl <- Postgres: OK 1 row affected
deactivate Postgres

RatingsUsecase <- PostgresRatingsRepoImpl
deactivate PostgresRatingsRepoImpl

WebServer <- RatingsUsecase
deactivate RatingsUsecase

User <- WebServer: 200 OK



@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.9+11-Ubuntu-0ubuntu1
Operating System: Linux
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>