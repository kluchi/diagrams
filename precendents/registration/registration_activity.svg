<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="772px" preserveAspectRatio="none" style="width:372px;height:772px;" version="1.1" viewBox="0 0 372 772" width="372px" zoomAndPan="magnify"><defs><filter height="300%" id="f1uv80jtmmv7gn" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="238" cy="18" fill="#000000" filter="url(#f1uv80jtmmv7gn)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1uv80jtmmv7gn)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="183.5" y="69"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="89" x="193.5" y="90.1387">request.recv()</text><rect fill="#FEFECE" filter="url(#f1uv80jtmmv7gn)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="182" y="144"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="92" x="192" y="165.1387">data.validate()</text><polygon fill="#FEFECE" filter="url(#f1uv80jtmmv7gn)" points="238,219,250,231,238,243,226,231,238,219" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1uv80jtmmv7gn)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="152.5" y="297"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="67" x="162.5" y="318.1387">find_user()</text><rect fill="#FEFECE" filter="url(#f1uv80jtmmv7gn)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="211" y="351"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="130" x="221" y="372.1387">send_response(422)</text><polygon fill="#FEFECE" filter="url(#f1uv80jtmmv7gn)" points="184,405,196,417,184,429,172,417,184,405" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1uv80jtmmv7gn)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="6" y="537"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="130" x="16" y="558.1387">send_response(409)</text><rect fill="#FEFECE" filter="url(#f1uv80jtmmv7gn)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="123.5" y="483"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="101" x="133.5" y="504.1387">save_user(user)</text><rect fill="#FEFECE" filter="url(#f1uv80jtmmv7gn)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="120" y="591"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="130" y="612.1387">send_email(user)</text><rect fill="#FEFECE" filter="url(#f1uv80jtmmv7gn)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="109" y="666"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="130" x="119" y="687.1387">send_response(201)</text><ellipse cx="184" cy="751" fill="none" filter="url(#f1uv80jtmmv7gn)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="184.5" cy="751.5" fill="#000000" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><!--MD5=[dd041cf45e5e0913bf6e881bb19ba206]
link start to request.recv()--><path d="M238,28.18 C238,37.27 238,51.53 238,63.49 " fill="none" id="start-&gt;request.recv()" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="238,68.79,242,59.79,238,63.79,234,59.79,238,68.79" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[13094c1fd81334aaf163549ca7d212c1]
link request.recv() to data.validate()--><path d="M238,103.2 C238,113.69 238,127.46 238,138.82 " fill="none" id="request.recv()-&gt;data.validate()" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="238,143.84,242,134.84,238,138.84,234,134.84,238,143.84" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[fda7a728a9c44840c5cbaaf22c97dd1d]
link data.validate() to #59--><path d="M238,178.12 C238,188.92 238,203.08 238,213.88 " fill="none" id="data.validate()-&gt;#59" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="238,218.89,242,209.89,238,213.89,234,209.89,238,218.89" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="153.425" y="208.468">is succesful</text><!--MD5=[f1ac1b6f57cdb905155966773d69db3f]
link #59 to find_user()--><path d="M234.12,239.48 C227.96,251.36 215.71,274.99 206.75,292.26 " fill="none" id="#59-&gt;find_user()" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="204.32,296.95,212.0254,290.8159,206.6299,292.5156,204.9303,287.1201,204.32,296.95" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="23" x="221" y="274.2104">true</text><!--MD5=[2c3069c68901bdfcb5501a674dcb1cc3]
link #59 to send_response(422)--><path d="M241.14,239.87 C243.61,246.12 247.1,255.09 250,263 C260.47,291.57 271.84,324.83 278.95,345.9 " fill="none" id="#59-&gt;send_response(422)" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="280.57,350.72,281.5098,340.9161,278.9846,345.978,273.9226,343.4528,280.57,350.72" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="28" x="255" y="274.2104">false</text><!--MD5=[57f2edc949834c1d089d2b8356ef1d40]
link find_user() to #66--><path d="M194.07,331.23 C191.8,350.33 188.06,381.82 185.83,400.57 " fill="none" id="find_user()-&gt;#66" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="185.19,405.95,190.2184,397.4815,185.7767,400.9845,182.2737,396.5428,185.19,405.95" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="70" x="203.7374" y="395.6285">user exists?</text><!--MD5=[8e9a38a01993245bd53bb71611866285]
link #66 to send_response(409)--><path d="M174.12,419.27 C158.05,421.87 126.3,429.31 109,449 C88.66,472.15 82.9,508.59 81.38,531.62 " fill="none" id="#66-&gt;send_response(409)" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="81.1,536.88,85.6069,528.1229,81.3852,531.8881,77.62,527.6665,81.1,536.88" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="110" y="460.2104">Some(User)</text><!--MD5=[b9d75ca8b93ada820b421c8513cc497e]
link #66 to save_user(user)--><path d="M184,429.26 C184,441.76 184,462.21 184,477.74 " fill="none" id="#66-&gt;save_user(user)" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="184,482.8,188,473.8,184,477.8,180,473.8,184,482.8" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="29" x="185" y="460.2104">None</text><!--MD5=[0d998f1564b3dba976f6850773b7e6d5]
link save_user(user) to send_email(user)--><path d="M184,517.1 C184,535.39 184,565.31 184,585.57 " fill="none" id="save_user(user)-&gt;send_email(user)" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="184,590.75,188,581.75,184,585.75,180,581.75,184,590.75" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[1e570d4f6859dea4be6c6573821ea8c1]
link send_email(user) to send_response(201)--><path d="M184,625.2 C184,635.69 184,649.46 184,660.82 " fill="none" id="send_email(user)-&gt;send_response(201)" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="184,665.84,188,656.84,184,660.84,180,656.84,184,665.84" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[cf67889822b4c67feb1ed9ab92f371d4]
link send_response(201) to end--><path d="M184,700.31 C184,711.24 184,725.47 184,735.9 " fill="none" id="send_response(201)-&gt;end" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="184,740.97,188,731.97,184,735.97,180,731.97,184,740.97" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[61374c55e6710ca7784e325ba2e3de25]
link send_response(409) to end--><path d="M78.64,571.36 C75.41,599.99 72.67,659.93 99,700 C115.58,725.24 149.68,739.44 169.27,745.83 " fill="none" id="send_response(409)-&gt;end" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="174.39,747.42,167.0039,740.905,169.6201,745.9205,164.6047,748.5368,174.39,747.42" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[560d46b6f6793d8224e9cff1efa47d2b]
link send_response(422) to end--><path d="M287.2,385.16 C288.38,402.43 290,430.64 290,455 C290,455 290,455 290,684 C290,726.45 227.98,742.57 198.82,747.81 " fill="none" id="send_response(422)-&gt;end" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="193.78,748.66,203.3186,751.1125,198.7108,747.8311,201.9923,743.2233,193.78,748.66" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[e9bad0b037c5ef92bb0d1f31887b0686]
@startuml registration_activity


(*) - -> "request.recv()"

"request.recv()" - -> "data.validate()"

"data.validate()" - -> if "is succesful" then
    - -> [true] find_user()
else
    - -> [false] send_response(422)
endif

"find_user()" - -> if "user exists?" then

- -> [Some(User)] send_response(409)

else

- -> [None] "save_user(user)"

"save_user(user)" - -> "send_email(user)"

"send_email(user)" - -> "send_response(201)"

endif

"send_response(201)" - -> (*)

"send_response(409)" - -> (*)

"send_response(422)" - -> (*)

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.9+11-Ubuntu-0ubuntu1
Operating System: Linux
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>