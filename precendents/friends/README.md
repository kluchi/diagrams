# Добавление друзей

**Название прецедента:** Добавление друзей

**Действующие лица:** Пользователь, Пользователь 2

**Цель:** Добавить пользователя в список друзей

**Предусловия:** Пользователи зарегистрированы

**Главная последовательность:**

1. Пользователь открывает страницу Пользователя 2
2. Пользователь нажимает на кнопку "Добавить в друзья"
3. Данные о заявке в друзья сохраняются на сервере (запрос обрабатывается не более чем за 2 секунды)
4. Пользователю 2 приходит уведомление, что его хотят добавить в друзья, содержащее кнопки "Принять заявку" и "Отклонить заявку" (не более чем через 2 секунды после получения сервером данных от Пользователя 1). Если Пользователь 2 не в сети, уведомление сохраняется и отображается при следующем входе на сайт.
5. Пользователь 2 нажимает на кнопку "Принять заявку"
6. Данные о том, что пользователи стали друзьями, сохраняются в базе данных (не позже чем через 2 секунды после подтверждения заявки)

**Альтернативная последовательность (отклонение заявки):**

1. Пользователь открывает страницу Пользователя 2
2. Пользователь нажимает на кнопку "Добавить в друзья"
3. Данные о заявке в друзья сохраняются на сервере (запрос обрабатывается не более чем за 2 секунды)
4. Пользователю 2 приходит уведомление, что его хотят добавить в друзья, содержащее кнопки "Принять заявку" и "Отклонить заявку" (не более чем через 2 секунды после получения сервером данных от Пользователя 1). Если Пользователь 2 не в сети, уведомление сохраняется и отображается при следующем входе на сайт.
5. Пользователь 2 нажимает на кнопку "Отклонить заявку"
6. В базе данных сохраняется информация о том, что заявка была просмотрена и новые заявки не могут быть отправлены

**Альтернативная последовательность (добавление в друзья пользователя, который ранее отклонил заявку):**

1. Пользователь открывает страницу Пользователя 2
2. Пользователь нажимает на кнопку "Добавить в друзья"
3. Данные отправляются на сервер, обнаруживается что Пользователь 1 уже пытался добавить Пользователя 2 в друзья (запрос обрабатывается не более чем за 2 секунды)
4. Пользователю 1 не присылается уведомлений, Пользователю 2 не присылается уведомлений
